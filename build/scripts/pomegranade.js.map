{"version":3,"sources":["pomegranade.es6"],"names":["pg","config","baseUrl_import","baseUrl_controller","baseUrl_model","baseUrl_module","baseUrl_view","imports_constructor","initialize","log","readyState","require","then","System","baseURL","rivets","configure","prefix","preloadData","rootInterface","templateDelimiters","handler","target","ev","binding","call","event","view","models","configure_importer","onLoadController","load","_onRivetsLoadController","baseUrl","baseUrl_Views","constructor","sightglass","adapters","root","_readyCallbacks","length","shift","ready","callback","push","path_toArray","p","split","filter","n","undefined","path_toObject","obj","canWrite","arrayPath","key","pop","namespace","reduce","o","i","path","object","_loaded","module","model","controller","controllerName","controllers","imports","hasOwnProperty","_load","itemType","itemsList","containerObj","returnArray","Promise","resolve_callback","results","_constructed","item","_resolve","__constructor","_loader","itemName","import","default","objPath","Object","assign","_c","_next","r","items","arguments","Array","isArray","prototype","slice","html","css","loader","el","document","body","show","text","setAttribute","hide","removeAttribute","has","hasAttribute","loadView","viewId","alert","done","_html","XMLHttpRequest","overrideMimeType","open","onload","onreadystatechange","responseText","onerror","send","views","watch","options","bindings","bind","data","id","guid","defineProperty","value","enumerable","writable","configurable","unbind","console","warn","unbindAll","__views__","_require","src","description","_reject","filename","substring","lastIndexOf","head","getElementsByTagName","script","createElement","type","appendChild","custom_config","logStore","msg","method","S4","Math","random","toString","substr","toLowerCase","addEventListener"],"mappings":"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","file":"pomegranade.js","sourcesContent":["/* jsHint inline configuration : */\n/* jshint undef: true, unused: false */\n/* global chrome , System , rivets , sightglass */\n\nlet pg = {\n\t/**\n\t * [config description]\n\t * @type {Object}\n\t */\n\tconfig : {\n\t\tbaseUrl_import \t\t\t: '/',\n\t\tbaseUrl_controller \t\t: 'scripts/controllers/',\n\t\tbaseUrl_model \t\t\t: 'scripts/models/',\n\t\tbaseUrl_module \t\t\t: 'scripts/pg-modules/',\n\t\tbaseUrl_view \t\t\t: 'html/views/',\n\t\timports_constructor \t: '__constructor'\n\t},\n\t/**\n\t * [initialize description]\n\t * @return {[type]} [description]\n\t */\n\tinitialize : function(){\n\t\tpg.log('pg.initialize() : Pomegranade Object constructed. Initializing (pg.readyState=\"interactive\")');\n\t\tpg.readyState = 'interactive';\n\t\t/* ES6 polyfill */\n\t\tpg.require('imports/babel-polyfill/polyfill.min.js', 'Babel Polyfill...')\n\t\t\t// System js (import modules from the future)\n\t\t\t.then(r=> pg.require('imports/systemjs/system.js', 'SystemJS...') )\n\t\t\t/* Sightglass ... data binding */\n\t\t\t.then(r=> pg.require('imports/sightglass/index.js', 'Sightglass...') )\n\t\t\t/* Rivers data binding....*/\n\t\t\t.then(r=> pg.require('imports/rivets/rivets.js', 'Rivets...') )\n\t\t\t/* rivets expansion */\n  \t\t\t.then(r=> pg.require('lib/rivets.stdlib.js', 'Rivets Formaters Lib...') )\n\t\t\t/* rivets model and views importer */\n\t\t\t.then(r=> pg.require('lib/rivets-import.js', 'Rivets Model Importer Lib...') )\n\t\t\t/* modules configurations  */\n\t\t\t.then(r=>{\n\t\t\t\tpg.log('pg.initialize() : Configure Rivets & Rivets Model Importer...');\n\t\t\t\tSystem.config({ baseURL: pg.config.baseUrl_import });\n\t\t\t\t// configure RIVETS\n\t\t\t\trivets.configure({\n\t\t\t\t\tprefix: 'rv', \t\t\t\t\t// Attribute prefix in templates\n\t\t\t\t\tpreloadData: true,\t\t\t\t// Preload templates with initial data on bind\n\t\t\t\t\trootInterface: '.',\t\t\t\t// Root sightglass interface for keypaths\n\t\t\t\t\ttemplateDelimiters: ['{', '}'],\t// Template delimiters for text bindings\n\t\t\t\t\t// Augment the event handler of the on-* binder\n\t\t\t\t\thandler: function(target, ev, binding) { return this.call(target, event, binding.view.models,binding); }\n\t\t\t\t});\n\t\t\t\trivets.configure_importer({\n\t\t\t\t\tonLoadController : pg.load._onRivetsLoadController,\n\t\t\t\t\tbaseUrl : pg.config.baseUrl_controller,\n\t\t\t\t\tbaseUrl_Views : pg.config.baseUrl_view,\n\t\t\t\t\tconstructor : pg.config.imports_constructor\n\t\t\t\t});\n\t\t\t\tpg.log('pg.initialize() : Integrate Binder in Pomegranade...');\n\t\t\t\tsightglass.adapters = rivets.adapters;\n\t\t\t\tsightglass.root \t= rivets.rootInterface;\n\t\t\t\t/* Ready ! Load main module */\n\t\t\t\tpg.log('pg.initialize() : Done! Pomegranade Ready! (pg.readyState=\"complete\")');\n\t\t\t\tpg.log('----------------------------------------------------------------------');\n\t\t\t\tpg.readyState = 'complete';\n\t\t\t\twhile( pg._readyCallbacks.length) ( pg._readyCallbacks.shift() )();\n\t\t\t});\n\t\treturn true;\n\t},\n\t/**\n\t * [ready description]\n\t * @param  {Function} callback [description]\n\t * @return {[type]}            [description]\n\t */\n\tready: function(callback){\n\t\tif(pg.readyState !== 'complete' || pg._readyCallbacks.length > 0) pg._readyCallbacks.push(callback);\n\t\telse callback();\n\t\treturn true;\n\t},\n\treadyState : 'loading',\n\t_readyCallbacks : [],\n\t/**\n\t * [load description]\n\t * @type {Object}\n\t */\n\tload :{\n\t\tpath_toArray( p='' ){\n\t\t\t// generate array from path and remove empty keys (caused by double // or ending /)\n\t\t\treturn p.split('/').filter( n=> (n === undefined || n === '') ? false : true );\n\t\t},\n\t\tpath_toObject( p='' , obj={} , canWrite = true){\n\t\t\tlet arrayPath = pg.load.path_toArray(p);\n\t\t\t// extract las item (module name reference)\n\t\t\tlet key = arrayPath.pop();\n\t\t\t// resolve module object instance path\n\t\t\tlet namespace = arrayPath.reduce( (o,i)=>{\n\t\t        if(o===false || ( o[i] === undefined && !canWrite ) ) return false;\n\t\t        if( o[i] === undefined) o[i] = {};\n\t\t        return  o[i];\n\t\t    }, obj );\n\t\t    namespace[key] = (typeof namespace[key] === 'object') ? namespace[key] : (canWrite ? {} : namespace[key]);\n\n\t\t    return{\n\t\t    \tpath \t\t: p,\n\t\t    \troot \t\t: obj,\n\t\t    \tkey \t\t: key,\n\t\t    \tnamespace \t: namespace,\n\t\t    \tobject \t\t: namespace[key]\n\t\t    };\n\t\t},\n\t\t_loaded : {\n\t\t\tmodule : {},\n\t\t\tmodel : {},\n\t\t\tcontroller : {}\n\t\t},\n\t\t_onRivetsLoadController(controllerName){\n\t\t\tpg.controllers[controllerName] = rivets.imports[controllerName];\n\t\t\tif(!pg.load._loaded['controller'].hasOwnProperty(controllerName)) pg.load._loaded['controller'][controllerName] = 1;\n\t\t\telse pg.load._loaded['controller'][controllerName]++;\n\t\t},\n\t\t_load(itemType = '', itemsList = [], containerObj = {}, returnArray = false ){\n\t\t\tpg.log('pg.load.'+itemType+'() : *** PREPARING TO LOAD ' + itemsList.length + ' '+itemType+'(s)...');\n\t\t\t// return promise\n\t\t\treturn new Promise(function(resolve_callback){\n\t\t\t\tlet results = [];\n\t\t\t\t// store loaded item object\n\t\t\t\tlet _constructed = function(item,_resolve){\n\t\t\t\t\tdelete item.__constructor; // ensure one time execution\n\t\t\t\t \treturn _resolve( item );\n\t\t\t\t};\n\t\t\t\t// loader function\n\t\t\t\tlet _loader = function(itemName = ''){\n\t\t\t\t\tpg.log('pg.load.'+itemType+'() : Loading '+ itemType +' : ' + itemName);\n\t\t\t\t\treturn new Promise(function(_resolve){\n\t\t\t\t\t\t//\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// IMPORT ITEM\n\t\t\t\t\t\tif(!pg.load._loaded[itemType].hasOwnProperty(itemName)) pg.load._loaded[itemType][itemName] = 1;\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tpg.log('pg.load.'+itemType+'() : The '+ itemType +' ' + itemName + ' is already loaded. Using active Instance');\n\t\t\t\t\t\t\tpg.load._loaded[itemType][itemName]++;\n\t\t\t\t\t\t\treturn _resolve( pg.load.path_toObject(itemName, containerObj, false) );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tSystem.import(pg.config['baseUrl_'+itemType] + itemName +'.js').then( item => {\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t// GENERATE ITEM INSTANCE\n\t\t\t\t\t\t\t// resolve item path into container object, creating tree if required\n\t\t\t\t\t\t\tif(itemType==='controller') rivets.imports[itemName] = item.default;\n\t\t\t\t\t\t\tlet objPath = pg.load.path_toObject(itemName, containerObj);\n\t\t\t\t\t\t\t// if item is a function assign to resolution path, if is an object, mix with existent object\n\t\t\t\t\t\t\tif(typeof item.default === 'function') objPath.namespace[objPath.key] = item.default;\n\t\t\t\t\t\t\telse objPath.object = Object.assign( objPath.object , item.default );\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t// EXECUTE CONSTRUCTOR\n\t\t\t\t\t\t\t// check if has custom constructor/igniter\n\t\t\t   \t\t\t\tif( objPath.object.hasOwnProperty(pg.config.imports_constructor) &&\n\t\t\t   \t\t\t\ttypeof objPath.object[pg.config.imports_constructor] === 'function' ){\n\t\t\t\t\t\t\t\tpg.log('pg.load.'+itemType+'() : Executing '+itemName+' constructor.' , 'info');\n\t\t   \t\t\t\t\t\t// execute CONTROLLER module custom constructor\n\t\t   \t\t\t\t\t\tlet _c = objPath.object[pg.config.imports_constructor].call( objPath.object );\n\t\t   \t\t\t\t\t\t// resolve pg.loadController (handle promise in CONTROLLER module __constructor)\n\t\t   \t\t\t\t\t\tif( typeof _c === 'object' && typeof _c.then === 'function'){\n\t\t\t\t\t\t\t\t\tpg.log('pg.load.'+itemType+'() : Detected Promise in '+itemName+' Constructor. Waiting resolution...' , 'info');\n\t\t   \t\t\t\t\t\t\treturn _c.then( x => _constructed(objPath.object,_resolve) );\n\t\t   \t\t\t\t\t\t}else{\n\t\t   \t\t\t\t\t\t\treturn _constructed(objPath.object,_resolve);\n\t\t   \t\t\t\t\t\t}\n\t\t\t   \t\t\t\t}else return _constructed(objPath.object,_resolve);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\t// promise sequential iterator\n\t\t\t\tfunction _next(){\n\t\t\t\t\t_loader( itemsList.shift() ).then( r =>{\n\t\t\t\t\t\tresults.push(r);\n\t\t\t\t\t\tif(itemsList.length === 0) resolve_callback( returnArray ? results : results[0] );\n\t\t\t\t\t\telse _next();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// start iteration\n\t\t\t\t_next();\n\t\t\t});\n\t\t},\n\t\tmodel(items = ''){\n\t\t\t// if more than one module has been requested, or single item has been requested inside array, return array\n\t\t\tlet returnArray = ( arguments.length > 1 || Array.isArray(items) ) ? true : false;\n\t\t\t// force items to be an array\n\t\t\titems = Array.isArray(items) ? items : Array.prototype.slice.call(arguments) ;\n\t\t\t// start load\n\t\t\treturn pg.load._load( 'model', items , pg.models , returnArray );\n\t\t},\n\t\tcontroller(items= ''){\n\t\t\t// if more than one module has been requested, or single item has been requested inside array, return array\n\t\t\tlet returnArray = ( arguments.length > 1 || Array.isArray(items) ) ? true : false;\n\t\t\t// force items to be an array\n\t\t\titems = Array.isArray(items) ? items : Array.prototype.slice.call(arguments) ;\n\t\t\t// start load\n\t\t\treturn pg.load._load( 'controller', items , pg.controllers , returnArray );\n\t\t},\n\t\tmodule(items = ''){\n\t\t\t// if more than one module has been requested, or single item has been requested inside array, return array\n\t\t\tlet returnArray = ( arguments.length > 1 || Array.isArray(items) ) ? true : false;\n\t\t\t// force items to be an array\n\t\t\titems = Array.isArray(items) ? items : Array.prototype.slice.call(arguments) ;\n\t\t\t// start load\n\t\t\treturn pg.load._load( 'module', items , pg , returnArray );\n\t\t},\n\t\tview : {},\n\t\thtml : {},\n\t\tcss  : {},\n\t},\n\n\tloader :function(el = document.body){\n\t\treturn {\n\t\t\tshow : function(text = ''){ el.setAttribute('pg-loading',text) },\n\t\t\thide : function(){ el.removeAttribute('pg-loading') },\n\t\t\ttext : function(text = ''){ el.setAttribute('pg-loading',text) },\n\t\t\thas : function(){ return el.hasAttribute('pg-loading') },\n\t\t};\n\t},\n\n\tconfigure : function(obj){} ,\n\n\t/**\n\t * [loadView description]\n\t * @param  {[type]} viewId [description]\n\t * @return {[type]}        [description]\n\t */\n\tloadView : function(viewId){\n\t\talert(\"pg.loadView() : just for testing\");\n\t\tlet path = 'views/pages/' + viewId + '.html';\n\t\treturn new Promise(function(_resolve){\n            let done = false;\n\t\t\tlet _html = new XMLHttpRequest();\n            _html.overrideMimeType('text/html');\n            _html.open('GET', path , true);\n            _html.onload = _html.onreadystatechange = function () {\n                if ( !done && (!this.readyState || this.readyState === 4) ) {\n                    done = true;\n                    // free memory, explicit  listener removal;\n                    _resolve(_html.responseText);\n                    _html.onload = _html.onreadystatechange = null;\n                }\n            };\n            _html.onerror = function(){ _resolve(false); };\n            _html.send(null);\n        });\n\t},\n\t/**\n\t * [controller description]\n\t * @type {Object}\n\t */\n\tviews : {},\n\tmodels : {},\n\tcontrollers : {},\n\t/**\n\t * [description]\n\t * @param  {[type]} )\n\t * @return {[type]}   [description]\n\t */\n\n\n\twatch : function(el, key, callback, options){\n\t\treturn sightglass(el, key, callback, options);\n\t},\n\tbindings : {},\n\tbind : function(el, data){\n\t\tvar view = rivets.bind(el,data);\n\t\tvar id = pg.guid();\n\t\tObject.defineProperty(view, '__pg_id__', {  value: id, enumerable: false, writable:false,  configurable: false });\n\t\tpg.bindings[id] = view;\n\t\treturn id;\n\t},\n\tunbind: function(id){\n\t\tif( pg.bindings.hasOwnProperty(id) ){\n\t\t\tpg.bindings[id].unbind();\n\t\t\tdelete pg.bindings[id];\n\t\t\treturn true;\n\t\t}else{\n\t\t\tconsole.warn('pg.unbind() : Provided binding ID does not match to any previous registered binding.');\n\t\t\treturn false;\n\t\t}\n\t},\n\tunbindAll: function(){\n\t\tpg.log('pg.unbindAll(): Unbinding all bindings ( pg.bind and rv:model:import)...');\n\t\t// automatic bindings in model imports....\n\t\tfor(var model in rivets.imports){\n\t\t\tif(!rivets.imports.hasOwnProperty(model) ) continue;\n\t\t\tconsole.log(model);\n\t\t\tfor(var view in rivets.imports[model].__views__){\n\t\t\t\tif(!rivets.imports[model].__views__.hasOwnProperty(view) ) continue;\n\t\t\t\trivets.imports[model].__views__[view].unbind();\n\t\t\t\tdelete rivets.imports[model].__views__[view];\n\t\t\t}\n\t\t}\n\t\t// manual bindings in in pomegradade...\n\t\tfor(var binding in pg.bindings){\n\t\t\tif(!pg.bindings.hasOwnProperty(binding) ) continue;\n\t\t\tconsole.log(binding);\n\t\t\tpg.unbind(binding);\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t * [require description]\n\t * @param  {[type]} url [description]\n\t * @return {[type]}     [description]\n\t */\n\trequire: (function(){\n\t\tconst config = {\n\t\t\tbaseUrl : 'scripts/'\n\t\t};\n\t\tlet _require = function(src, description = '') {\n\t\t\tpg.log('pg.require() :'+ description + ' ' + src);\n\t    \treturn new Promise(function(_resolve, _reject){\n\t\t\t   \tlet filename = src.substring(src.lastIndexOf('/')+1);\n\t\t\t\t// if no extension, assume .JS and extract again the filenamename\n\t\t\t\tif(filename.lastIndexOf('.js') === -1){\n\t\t\t\t\tsrc = src + '.js';\n\t\t\t\t\tfilename = src.substring(src.lastIndexOf('/')+1);\n\t\t\t\t}\n\t\t\t    // Adding the script tag to the head\n\t\t\t    let done = false;\n\t\t\t    let head = document.getElementsByTagName('head')[0];\n\t\t\t    let script = document.createElement('script');\n\t\t\t    script.type = 'text/javascript';\n\t\t\t    script.src = config.baseUrl + src;\n\t\t\t    //pg.log(script.src);\n\t\t\t\tscript.onload = script.onreadystatechange = function() {\n\t\t\t\t\t// attach to both events for cross browser finish detection:\n\t\t\t\t\tif ( !done && (!this.readyState || this.readyState === 'loaded' || this.readyState === 'complete') ) {\n\t\t\t\t\t\t// done! execute PROMISE _resolve\n\t\t\t\t\t\tdone = true;\n\t\t\t\t\t\t// cleans up a little memory, removing listener;\n\t\t\t\t\t\tscript.onload = script.onreadystatechange = null;\n\t\t\t\t\t\t_resolve();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t    // Fire the loading\n\t\t\t    head.appendChild(script);\n\t\t\t});\n\t\t};\n\t\t_require.config = function(custom_config){\n\t\t\tObject.assign(config,custom_config);\n\t\t\treturn true;\n\t\t};\n\t\treturn _require;\n\t})(),\n\t/**\n\t * [feeds description]\n\t * @type {Array}\n\t */\n\n\tlogStore : [],\n\tlog : function(msg = '{empty}' , method = 'log'){\n\t\tpg.logStore.push(msg);\n\t\tconsole[method](msg);\n\t\treturn true;\n\t},\n\t/**\n\t * [createGuid description]\n\t * @return {[type]} [description]\n\t */\n\tguid : function(){\n\t\tfunction S4() {  return (((1+Math.random())*0x10000)|0).toString(16).substring(1) }\n\t\t\t// then to call it, plus stitch in '4' in the third group\n\t\treturn (S4() + S4() + '-' + S4() + '-4' + S4().substr(0,3) + '-' + S4() + '-' + S4() + S4() + S4()).toLowerCase();\n\t}\n};\n\nif(document.readyState === 'complete' || document.readyState === 'interactive') pg.initialize();\nelse document.addEventListener('DOMContentLoaded', pg.initialize );\n"]}