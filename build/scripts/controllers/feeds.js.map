{"version":3,"sources":["../../../src/scripts/controllers/feeds.es6"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAM,Q;;;;;;;qCACU;AACd,WAAK,WAAL,GAAoB,SAApB;AACA,WAAK,OAAL,GAAe;AACd,uBAAkB,EADJ;AAEd,aAAU;AAFI,OAAf;AAIA,WAAK,IAAL,GAAY;AACX,aAAM,EADK;AAEX,YAAM,8BAFK;AAGX,mBAAa,EAHF;AAIX,YAAM,EAJK;AAKX,mBAAc;AALH,OAAZ;AAQA;;;mCAEmB,CAEnB;;;oCAEoB;;AAEpB,WAAK,WAAL,GAAmB,WAAnB;AACA;;;sCAEsB;AACtB,cAAQ,GAAR,CAAY,wBAAZ;;AAEA,SAAG,OAAH,CAAW,KAAK,IAAL,CAAU,GAArB,EAA0B,IAA1B,CAA+B,UAAS,MAAT,EAAgB;AAC9C,eAAQ,GAAR,CAAY,MAAZ;;AAEA,YAAK,OAAL,CAAa,cAAb,GAA8B,EAA9B;AACA,YAAK,IAAL,CAAU,UAAV,GAAuB,EAAvB;AACA,WAAG,WAAW,KAAd,EAAoB;AACnB,cAAM,aAAN;AACA,eAAO,KAAP;AACA;;AAED,YAAK,WAAL,GAAkB,aAAlB;AACA,YAAI,IAAI,CAAR,IAAa,OAAO,GAAP,CAAW,OAAX,CAAmB,IAAnB,CAAwB,CAAxB,CAAb,EAAwC;AACtC,YAAI,OAAO,GAAP,CAAW,OAAX,CAAmB,IAAnB,CAAwB,CAAxB,EAA2B,cAA3B,CAA0C,CAA1C,KAAiD,EAAE,MAAF,CAAS,CAAT,EAAY,KAAZ,CAAkB,YAAlB,CAArD,EAAuF,KAAK,OAAL,CAAa,cAAb,CAA4B,IAA5B,CAAiC,CAAjC;AACxF;AACD,OAdD;AAeA;;;gCAEgB;AAChB,UAAI,OAAO;AACV,WAAQ,EADE;AAEV,aAAS,EAFC;AAGV,YAAQ,EAHE;AAIV,kBAAY,EAJF;AAKV,YAAQ,CALE;AAMV,mBAAc;AANJ,OAAX;;AASA,WAAK,EAAL,GAAU,GAAG,UAAH,EAAV;AACA,WAAK,IAAL,GAAY,KAAK,IAAL,CAAU,IAAV,CAAe,IAAf,EAAZ;AACA,WAAK,GAAL,GAAW,KAAK,IAAL,CAAU,GAAV,CAAc,IAAd,EAAX;AACA,WAAK,UAAL,GAAkB,KAAK,IAAL,CAAU,UAA5B;AACA,WAAK,GAAL,GAAW,KAAK,IAAL,CAAU,GAArB;AACA,WAAK,UAAL,GAAkB,KAAK,IAAL,CAAU,UAA5B;;AAEA,WAAK,KAAL,CAAW,IAAX,CAAgB,IAAhB;AACA,SAAG,yBAAH;AACA,aAAO,IAAP;AACA;;;;;;sBAGa,K","file":"feeds.js","sourcesContent":["class feeds{\r\n\t__constructor(){\r\n\t\tthis.currentView  = 'listing';\r\n\t\tthis.helpers = {\r\n\t\t\tfeedProperties \t: [],\r\n\t\t\tmode \t\t\t: 'new'\r\n\t\t};\r\n\t\tthis.form = {\r\n\t\t\tname: '',\r\n\t\t\turl : 'https://kat.cr/movies/?rss=1',\r\n\t\t\tcategories : [],\r\n\t\t\tTTL : 60,\r\n\t\t\tproperties :  [],\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tstatic showListing(){\r\n\r\n\t}\r\n\r\n\tstatic showFormData(){\r\n\t\t//\r\n\t\tthis.currentView = 'form:data';\r\n\t}\r\n\r\n\tstatic showFormConfig(){\r\n\t\tconsole.log('Validating RSS feed...');\r\n\r\n\t\tpg.getFeed(this.form.url).then(function(result){\r\n\t\t\tconsole.log(result);\r\n\r\n\t\t\tthis.helpers.feedProperties = [];\r\n\t\t\tthis.form.properties = [];\r\n\t\t\tif(result === false){\r\n\t\t\t\talert('RSS invalid');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tthis.currentView= 'form:config';\r\n\t\t\tfor(let i in result.rss.channel.item[0]){\r\n\t\t\t \tif( result.rss.channel.item[0].hasOwnProperty(i) &&  i.charAt(0).match(/[A-Z|a-z]/i) ) this.helpers.feedProperties.push(i);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tstatic saveForm(){\r\n\t\tvar feed = {\r\n\t\t\tid \t\t\t: '',\r\n\t\t\tname \t\t: '',\r\n\t\t\turl \t\t: '',\r\n\t\t\tproperies\t: [],\r\n\t\t\tTTL \t\t: 0,\r\n\t\t\tcategories \t: [],\r\n\t\t};\r\n\r\n\t\tfeed.id = pg.createGuid();\r\n\t\tfeed.name = this.form.name.trim();\r\n\t\tfeed.url = this.form.url.trim();\r\n\t\tfeed.categories = this.form.categories;\r\n\t\tfeed.TTL = this.form.TTL;\r\n\t\tfeed.properties = this.form.properties;\r\n\r\n\t\tview.feeds.push(feed);\r\n\t\tpg.countFeedsinAllCategories();\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nexport default feeds;\r\n"]}