{"version":3,"sources":["pg-core.es6"],"names":[],"mappings":"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","file":"pg-core.js","sourcesContent":["/* jsHint inline configuration : */\n/* jshint undef: true, unused: false */\n/* global chrome , System , rivets , sightglass */\n\nlet pg;\n\n(function(){\n\t'use strict';\n\tpg = {\n\t\tbinder :{}, // rivets.binder\n\t\tbind : function(){}, // rivets.bind\n\t\twatch : function(){}, // sightglass\n\t\t/**\n\t\t * [configure description]\n\t\t * @param  {[type]} obj [description]\n\t\t * @return {[type]}     [description]\n\t\t */\n\t\t /*\n\t\t__Controller : class{\n\t\t\tconstructor(name, module ) {\n    \t\t\t//module.__pg_controller = name; // ¿ injected native / babel ?\n    \t\t\tif(name === 'main') module.log = function(msg,type){ return pg.log(msg,type) };\n    \t\t\tmodule._expose = function(){\n    \t\t\t\treturn Object.getOwnPropertyNames(module).filter( p => {\n\t\t\t\t\t\treturn( ['_expose','prototype'].indexOf(p) === -1);\n\t\t\t\t\t});\n\t\t\t\t};\n    \t\t\treturn module;\n  \t\t\t}\n\t\t},\n\t\t*/\n\t\t__Controller: function(name, module){\n\t\t\tmodule.name = name;\n\t\t\tif(name === 'main') module.log = function(msg,type){ return pg.log(msg,type) };\n\t\t\t/*\n\t\t\tObject.defineProperty(module, '$scope', {\n\t\t\t\tget: function () {\n\t\t\t\t\treturn Object.getOwnPropertyNames(module).filter( p => {\n\t\t\t\t\t\treturn( ['$scope','prototype'].indexOf(p) === -1) ? \"add\": false;;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\t*/\n\n\t\t\treturn module;\n\t\t},\n\n\t\tconfigure : function(obj){} ,\n\t\tconfig : {\n\t\t\timport_baseUrl : '/',\n\t\t\tappReference : 'app'\n\t\t},\n\t\t/**\n\t\t * [loadView description]\n\t\t * @param  {[type]} viewId [description]\n\t\t * @return {[type]}        [description]\n\t\t */\n\t\tloadView : function(viewId){\n\t\t\tlet path = 'views/pages/' + viewId + '.html';\n\t\t\treturn new Promise(function(_resolve){\n\t            let done = false;\n\t\t\t\tlet _html = new XMLHttpRequest();\n\t            _html.overrideMimeType('text/html');\n\t            _html.open('GET', path , true);\n\t            _html.onload = _html.onreadystatechange = function () {\n\t                if ( !done && (!this.readyState || this.readyState === 4) ) {\n\t                    done = true;\n\t                    // free memory, explicit  listener removal;\n\t                    _resolve(_html.responseText);\n\t                    _html.onload = _html.onreadystatechange = null;\n\t                }\n\t            };\n\t            _html.onerror = function(){ _resolve(false); };\n\t            _html.send(null);\n\t        });\n\t\t},\n\t\t/**\n\t\t * [loadController description]\n\t\t * @param  {[type]} controller [description]\n\t\t * @return {[type]}            [description]\n\t\t */\n\t\tloadController : function(controllerId){\n\t\t\tpg.log( 'pg.loadController() : Loading controller module \"' + controllerId + '\"' );\n\t\t\treturn new Promise(function(_resolve, __reject){\n\t\t\t\t// internal function used to end loadController routine, cleaning\n\t\t\t\t// CONTROLLER module and resolving promise...\n\t\t\t\tlet __resolve_loadController = function(){\n\t\t\t\t\tif( controllerId === 'main') window[pg.config.appReference] = pg.controllers[controllerId];\n\t\t\t\t\tdelete pg.controllers[controllerId].length; // babel transpiler autogen ¿?\n\t\t\t\t\tdelete pg.controllers[controllerId].__constructor; // ensure one time executable\n\t\t\t\t \t_resolve(   pg.controllers[controllerId] );\n\t\t\t\t};\n\t\t\t\t// import CONTROLLER module\n\t\t\t\tSystem.import('/scripts/controllers/'+ controllerId +'.js').then(function(controller){\n\t   \t\t\t\t// create CONTROLLER module instance\n\t   \t\t\t\t// ****\n\t   \t\t\t\t// RIVETS cant read ES6 classes (..or babel transpilation)\n\t   \t\t\t\t// soo using standard objects in modules...\n\t   \t\t\t\t// pg.controllers[controllerId] = new controller.default(controllerId,controller.default );\n\t   \t\t\t\t// ****\n\n\t   \t\t\t\tpg.controllers[controllerId] = new pg.__Controller(controllerId, controller.default);\n\n\t   \t\t\t\t// check if has custom constructor/igniter\n\t   \t\t\t\tif( pg.controllers[controllerId].hasOwnProperty('__constructor') &&\n\t   \t\t\t\t\ttypeof pg.controllers[controllerId].__constructor === 'function' ){\n\t   \t\t\t\t\t// execute CONTROLLER module custom constructor\n\t   \t\t\t\t\tlet _c = pg.controllers[controllerId].__constructor.call( pg.controllers[controllerId] );\n\t   \t\t\t\t\t// resolve pg.loadController (handle promise in CONTROLLER module __constructor)\n\t   \t\t\t\t\tif( _c !== undefined &&\n\t   \t\t\t\t\t\t_c.hasOwnProperty('then') &&\n\t   \t\t\t\t\t\ttypeof _c.then === 'function') _c.then( r =>  __resolve_loadController() );\n\t   \t\t\t\t\telse __resolve_loadController();\n\t   \t\t\t\t}else __resolve_loadController();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * [controller description]\n\t\t * @type {Object}\n\t\t */\n\t\tcontrollers : {\n\n\t\t},\n\t\t/**\n\t\t * [description]\n\t\t * @param  {[type]} )\n\t\t * @return {[type]}   [description]\n\t\t */\n\t\t_init : document.addEventListener('DOMContentLoaded', function() {\n  \t\t\t/* ES6 polyfill */\n  \t\t\tpg.log('pg._init() : Requiring Babel Polyfill...');\n  \t\t\tpg.require('imports/babel-polyfill/polyfill.min.js').then(function(){\n  \t\t\t\t// System js (import modules from the future)\n  \t\t\t\tpg.log('pg._init() : Requiring SystmJS...');\n  \t\t\t\tpg.require('imports/systemjs/system.js').then(function(){\n  \t\t\t\t\tSystem.config({ baseURL: pg.config.import_baseUrl });\n\t\t  \t\t\t/* Sightglass ... data binding */\n\t\t  \t\t\tpg.log('pg._init() : Requiring Sightglass...');\n\t\t  \t\t\tpg.require('imports/sightglass/index.js').then(function(){\n\t\t  \t\t\t\t/* Rivers data binding on steroids....*/\n\t\t  \t\t\t\tpg.log('pg._init() : Requiring Rivets...');\n\t\t\t  \t\t\tpg.require('imports/rivets/rivets.js').then(function(){\n\t\t  \t\t\t\t\t/* Steroids expansion */\n\t\t  \t\t\t\t\tpg.log('pg._init() : Requiring Rivets Formaters Lib... ( rivets.stdlib )');\n\t\t\t  \t\t\t\tpg.require('lib/rivets.stdlib.js').then(function(){\n\t\t\t  \t\t\t\t\t// configure RIVETS\n\t\t\t  \t\t\t\t\trivets.configure({\n\t\t\t\t\t\t\t\t\tprefix: 'rv', \t\t\t\t\t// Attribute prefix in templates\n\t\t\t\t\t\t\t\t\tpreloadData: true,\t\t\t\t// Preload templates with initial data on bind\n\t\t\t\t\t\t\t\t\trootInterface: '.',\t\t\t\t// Root sightglass interface for keypaths\n\t\t\t\t\t\t\t\t\ttemplateDelimiters: ['{', '}'],\t// Template delimiters for text bindings\n\t\t\t\t\t\t\t\t\t// Augment the event handler of the on-* binder\n\t\t\t\t\t\t\t\t\thandler: function(target, ev, binding) { return this.call(target, event, binding.view.models,binding); }\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tsightglass.adapters = rivets.adapters;\n\t\t\t\t\t\t\t\tsightglass.root = rivets.rootInterface;\n\t\t\t\t\t\t\t\tpg.binder = rivets;\n\t\t\t\t\t\t\t\tpg.bind = rivets.bind;\n\t\t\t\t\t\t\t\tpg.watch = sightglass;\n\t\t\t  \t\t\t\t\t/* Ready ! Load main module */\n\n\t\t\t  \t\t\t\t\tpg.log('pg._init() : Loading MAIN controller...');\n\t\t\t\t\t  \t\t\tpg.loadController('main').then( r =>{\n\t\t\t  \t\t\t\t\t\tpg.log('pg._init() : Main Controller Loaded!');\n\t\t\t\t\t  \t\t\t});\n\t\t\t  \t\t\t\t});\n\t\t  \t\t\t\t});\n\t  \t\t\t\t});\n\t  \t\t\t});\n\t\t\t});\n\t\t}),\n\t\t/**\n\t\t * [require description]\n\t\t * @param  {[type]} url [description]\n\t\t * @return {[type]}     [description]\n\t\t */\n\t\trequire: (function(){\n\t\t\tconst config = {\n\t\t\t\tbaseUrl : 'scripts/'\n\t\t\t};\n\t\t\tlet _require = function(src) {\n\t\t    \treturn new Promise(function(_resolve, _reject){\n\t\t\t\t   \tlet filename = src.substring(src.lastIndexOf('/')+1);\n\t\t\t\t\t// if no extension, assume .JS and extract again the filenamename\n\t\t\t\t\tif(filename.lastIndexOf('.js') === -1){\n\t\t\t\t\t\tsrc = src + '.js';\n\t\t\t\t\t\tfilename = src.substring(src.lastIndexOf('/')+1);\n\t\t\t\t\t}\n\t\t\t\t    // Adding the script tag to the head\n\t\t\t\t    let done = false;\n\t\t\t\t    let head = document.getElementsByTagName('head')[0];\n\t\t\t\t    let script = document.createElement('script');\n\t\t\t\t    script.type = 'text/javascript';\n\t\t\t\t    script.src = config.baseUrl + src;\n\t\t\t\t    //pg.log(script.src);\n\t\t\t\t\tscript.onload = script.onreadystatechange = function() {\n\t\t\t\t\t\t// attach to both events for cross browser finish detection:\n\t\t\t\t\t\tif ( !done && (!this.readyState || this.readyState === 'loaded' || this.readyState === 'complete') ) {\n\t\t\t\t\t\t\t// done! execute PROMISE _resolve\n\t\t\t\t\t\t\tdone = true;\n\t\t\t\t\t\t\t// cleans up a little memory, removing listener;\n\t\t\t\t\t\t\tscript.onload = script.onreadystatechange = null;\n\t\t\t\t\t\t\t_resolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t    // Fire the loading\n\t\t\t\t    head.appendChild(script);\n\t\t\t\t});\n\t\t\t};\n\t\t\t_require.config = function(custom_config){\n\t\t\t\tObject.assign(config,custom_config);\n\t\t\t\treturn true;\n\t\t\t};\n\t\t\treturn _require;\n\t\t})(),\n\t\t/**\n\t\t * [feeds description]\n\t\t * @type {Array}\n\t\t */\n\n\t\tlogStore : [],\n\t\tlog : function(msg = '{empty}' , method = 'log'){\n\t\t\tpg.logStore.push(msg);\n\t\t\tconsole[method](msg);\n\t\t\treturn true;\n\t\t},\n\t\t/**\n\t\t * [description]\n\t\t * @param  {[type]} ){ return\n\t\t * @return {[type]}     [description]\n\t\t */\n\t\tgetManifest : function(){ return chrome.app.getDetails(); },\n\t\tgetVersion : function(){ return chrome.app.getDetails().version; },\n\t\tgetCurrentLocale : function(){ return chrome.app.getDetails().current_locale; },\n\t\t/**\n\t\t * [popup description]\n\t\t * @type {[type]}\n\t\t */\n\t\tpopup : null,\n\n\t\t/**\n\t\t * [createGuid description]\n\t\t * @return {[type]} [description]\n\t\t */\n\t\tcreateGuid : function(){\n\t\t\tfunction S4() {  return (((1+Math.random())*0x10000)|0).toString(16).substring(1) }\n \t\t\t// then to call it, plus stitch in '4' in the third group\n\t\t\treturn (S4() + S4() + '-' + S4() + '-4' + S4().substr(0,3) + '-' + S4() + '-' + S4() + S4() + S4()).toLowerCase();\n\t\t}\n\t};\n\n})();\n\n\n"]}