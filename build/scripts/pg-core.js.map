{"version":3,"sources":["pg-core.es6"],"names":[],"mappings":"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","file":"pg-core.js","sourcesContent":["/* jsHint inline configuration : */\n/* jshint undef: true, unused: false */\n/* global chrome , System , rivets , sightglass */\n\nlet pg = {\n\n\tinitialize : function(){\n\t\tpg.log('pg.initialize() : Pomegranade Object constructed. Initializing (pg.readyState=\"interactive\")');\n\t\tpg.readyState = 'interactive';\n\t\t/* ES6 polyfill */\n\t\tpg.log('pg.initialize() : Requiring Babel Polyfill...');\n\t\tpg.require('imports/babel-polyfill/polyfill.min.js')\n\t\t\t.then(r=>{\n\t\t\t\t// System js (import modules from the future)\n\t\t\t\tpg.log('pg.initialize() : Requiring SystmJS...');\n\t\t\t\treturn pg.require('imports/systemjs/system.js');\n\t\t\t})\n\t\t\t.then(r=>{\n\t\t\t\tSystem.config({ baseURL: pg.config.import_baseUrl });\n\t\t\t\t/* Sightglass ... data binding */\n\t\t\t\tpg.log('pg.initialize() : Requiring Sightglass...');\n\t\t\t\treturn pg.require('imports/sightglass/index.js');\n\t\t\t})\n\t\t\t.then(r=>{\n\t\t\t\t/* Rivers data binding....*/\n\t\t\t\tpg.log('pg.initialize() : Requiring Rivets...');\n  \t\t\t\treturn pg.require('imports/rivets/rivets.js');\n  \t\t\t})\n  \t\t\t.then(r=>{\n\t\t\t\t/* rivets expansion */\n\t\t\t\tpg.log('pg.initialize() : Requiring Rivets Formaters Lib... ( rivets.stdlib )');\n  \t\t\t\treturn pg.require('lib/rivets.stdlib.js');\n  \t\t\t})\n\t\t\t.then(r=>{\n\t\t\t\tpg.log('pg.initialize() : Requiring Rivets Model Importer Lib... ( rivets-import-view-model )');\n\t\t\t\treturn pg.require('lib/rivets-import-view-model.js');\n\t\t\t})\n\t\t\t.then(r=>{\n\t\t\t\tpg.log('pg.initialize() : Configure Rivets & Rivets Model Importer...');\n\t\t\t\t// configure RIVETS\n\t\t\t\t\trivets.configure({\n\t\t\t\t\tprefix: 'rv', \t\t\t\t\t// Attribute prefix in templates\n\t\t\t\t\tpreloadData: true,\t\t\t\t// Preload templates with initial data on bind\n\t\t\t\t\trootInterface: '.',\t\t\t\t// Root sightglass interface for keypaths\n\t\t\t\t\ttemplateDelimiters: ['{', '}'],\t// Template delimiters for text bindings\n\t\t\t\t\t// Augment the event handler of the on-* binder\n\t\t\t\t\thandler: function(target, ev, binding) { return this.call(target, event, binding.view.models,binding); }\n\t\t\t\t});\n\t\t\t\trivets.configure_importer({\n\t\t\t\t\tbasePath : pg.config.importedModels_basePath,\n\t\t\t\t\tconstructor : pg.config.importedModels_constructor\n\t\t\t\t});\n\t\t\t\tpg.log('pg.initialize() : Integrate Binder in Pomegranade...');\n\t\t\t\tsightglass.adapters = rivets.adapters;\n\t\t\t\tsightglass.root \t= rivets.rootInterface;\n\t\t\t\t/* Ready ! Load main module */\n\t\t\t\tpg.log('pg.initialize() : Done! Pomegranade Ready! (pg.readyState=\"complete\")');\n\t\t\t\tpg.readyState = 'complete';\n\t\t\t\twhile( pg._readyCallbacks.length) ( pg._readyCallbacks.shift() )();\n\t\t\t});\n\t\treturn true;\n\t},\n\n\tready: function(callback){\n\t\tif(pg.readyState !== 'complete' || pg._readyCallbacks.length > 0) pg._readyCallbacks.push(callback);\n\t\telse callback();\n\t\treturn true;\n\t},\n\treadyState : 'loading',\n\t_readyCallbacks : [],\n\n\tload :{\n\t\tmodel: function(modelName){\n\t\t\treturn new Promise(function(_resolve){\n\t\t\t\t_resolve(rivets.importedModels[modelName]);\n\t\t\t});\n\t\t},\n\t\tview : {},\n\t\thtml : {},\n\t\tmodule : function(moduleNameArray = ''){\n\t\t\t// if more than one module has been requested, or single module has been requested inside array, return array\n\t\t\tlet returnArray = ( arguments.lenght > 1 || Array.isArray(moduleNameArray) ) ? true : false;\n\t\t\t// force input to be an array\n\t\t\tif( !Array.isArray(moduleNameArray) ) moduleNameArray = Array.prototype.slice.call(arguments);\n\t\t\tconsole.log('pg.load.module() : Preparing to load ' + moduleNameArray.length + ' modules...');\n\n\t\t\t// return promise\n\t\t\treturn new Promise(function(resolve_callback){\n\t\t\t\tlet results = [];\n\t\t\t\t// module loader\n\t\t\t\tfunction _load(moduleName = ''){\n\t\t\t\t\tconsole.log('pg.load.module() : Loading module : ' + moduleName);\n\t\t\t\t\treturn new Promise(function(_resolve){\n\t\t\t\t\t\t// generate array from path and remove empty keys (caused by double // or ending /)\n\t\t\t\t\t\tlet objPath = moduleName.split('/').filter( n=> (n === undefined || n === '') ? false : true );\n\t\t\t\t\t\t// extract las item (module name reference)\n\t\t\t\t\t\tlet objName = objPath.pop();\n\t\t\t\t\t\tSystem.import('scripts/pg-modules/' + moduleName +'.js').then(function(module){\n\t\t\t\t\t\t\t// resolve module object instance path\n\t\t\t\t\t\t\tlet resolvedPath = objPath.reduce( (o,i)=>{\n\t\t\t\t\t\t        if( o[i] === undefined) o[i] = {};\n\t\t\t\t\t\t        return  o[i];\n\t\t\t\t\t\t    }, pg );\n\t\t\t\t\t\t    // append module to module container object\n\t\t\t\t\t\t    resolvedPath[objName] = typeof resolvedPath[objName] === 'object' ? Object.assign(resolvedPath[objName] , module.default) : module.default;\n\t\t    \t\t\t\t// return reference to module\n\t\t\t\t\t\t    _resolve( resolvedPath[objName] );\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// promise sequential iterator\n\t\t\t\tfunction _next(){\n\t\t\t\t\t_load( moduleNameArray.shift() ).then( r =>{\n\t\t\t\t\t\tresults.push(r);\n\t\t\t\t\t\tif(moduleNameArray.length === 0) resolve_callback( returnArray ? results : results[0] );\n\t\t\t\t\t\telse _next();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// start iteration\n\t\t\t\t_next();\n\t\t\t});\n\t\t}\n\t},\n\n\tloader :function(el = document.body){\n\t\treturn {\n\t\t\tshow : function(text = ''){ el.setAttribute('pg-loading',text) },\n\t\t\thide : function(){ el.removeAttribute('pg-loading') },\n\t\t\ttext : function(text = ''){ el.setAttribute('pg-loading',text) },\n\t\t\thas : function(){ return el.hasAttribute('pg-loading') },\n\t\t};\n\t},\n\t/**\n\t * [configure description]\n\t * @param  {[type]} obj [description]\n\t * @return {[type]}     [description]\n\t */\n\t /*\n\t__Controller : class{\n\t\tconstructor(name, module ) {\n\t\t\t//module.__pg_controller = name; // ¿ injected native / babel ?\n\t\t\tif(name === 'main') module.log = function(msg,type){ return pg.log(msg,type) };\n\t\t\tmodule._expose = function(){\n\t\t\t\treturn Object.getOwnPropertyNames(module).filter( p => {\n\t\t\t\t\treturn( ['_expose','prototype'].indexOf(p) === -1);\n\t\t\t\t});\n\t\t\t};\n\t\t\treturn module;\n\t\t\t}\n\t},\n\t*/\n\t__Controller: function(name, module){\n\t\tmodule.name = name;\n\t\tif(name === 'main') module.log = function(msg,type){ return pg.log(msg,type) };\n\t\t/*\n\t\tObject.defineProperty(module, '$scope', {\n\t\t\tget: function () {\n\t\t\t\treturn Object.getOwnPropertyNames(module).filter( p => {\n\t\t\t\t\treturn( ['$scope','prototype'].indexOf(p) === -1) ? \"add\": false;;\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t*/\n\n\t\treturn module;\n\t},\n\tconfigure : function(obj){} ,\n\tconfig : {\n\t\timportedModels_basePath : 'scripts/models/',\n\t\timportedModels_constructor : '__constructor',\n\t\timport_baseUrl : '/',\n\t\tappReference : 'app'\n\t},\n\t/**\n\t * [loadView description]\n\t * @param  {[type]} viewId [description]\n\t * @return {[type]}        [description]\n\t */\n\tloadView : function(viewId){\n\t\tlet path = 'views/pages/' + viewId + '.html';\n\t\treturn new Promise(function(_resolve){\n            let done = false;\n\t\t\tlet _html = new XMLHttpRequest();\n            _html.overrideMimeType('text/html');\n            _html.open('GET', path , true);\n            _html.onload = _html.onreadystatechange = function () {\n                if ( !done && (!this.readyState || this.readyState === 4) ) {\n                    done = true;\n                    // free memory, explicit  listener removal;\n                    _resolve(_html.responseText);\n                    _html.onload = _html.onreadystatechange = null;\n                }\n            };\n            _html.onerror = function(){ _resolve(false); };\n            _html.send(null);\n        });\n\t},\n\t/**\n\t * [loadController description]\n\t * @param  {[type]} controller [description]\n\t * @return {[type]}            [description]\n\t */\n\tloadController : function(controllerId){\n\t\tpg.log( 'pg.loadController() : Loading controller module \"' + controllerId + '\"' );\n\t\treturn new Promise(function(_resolve, __reject){\n\t\t\t//\n\t\t\t//\n\t\t\t// internal function used to end loadController routine, cleaning\n\t\t\t// CONTROLLER module and resolving promise...\n\t\t\tlet __resolve_loadController = function(){\n\t\t\t\tif( controllerId === 'main') window[pg.config.appReference] = pg.controllers[controllerId];\n\t\t\t\tdelete pg.controllers[controllerId].length; // babel transpiler autogen ¿?\n\t\t\t\tdelete pg.controllers[controllerId].__constructor; // ensure one time executable\n\t\t\t \t_resolve(   pg.controllers[controllerId] );\n\t\t\t};\n\t\t\t//\n\t\t\t//\n\t\t\t//\n\t\t\t// import CONTROLLER module\n\t\t\tSystem.import('/scripts/controllers/'+ controllerId +'.js').then(function(controller){\n   \t\t\t\t// create CONTROLLER module instance\n   \t\t\t\t// ****\n   \t\t\t\t// RIVETS cant read ES6 classes (..or babel transpilation)\n   \t\t\t\t// soo using standard objects in modules...\n   \t\t\t\t// pg.controllers[controllerId] = new controller.default(controllerId,controller.default );\n   \t\t\t\t// ****\n\n   \t\t\t\tpg.controllers[controllerId] = new pg.__Controller(controllerId, controller.default);\n\n   \t\t\t\t// check if has custom constructor/igniter\n   \t\t\t\tif( pg.controllers[controllerId].hasOwnProperty('__constructor') &&\n   \t\t\t\t\ttypeof pg.controllers[controllerId].__constructor === 'function' ){\n   \t\t\t\t\t// execute CONTROLLER module custom constructor\n   \t\t\t\t\tlet _c = pg.controllers[controllerId].__constructor.call( pg.controllers[controllerId] );\n   \t\t\t\t\t// resolve pg.loadController (handle promise in CONTROLLER module __constructor)\n   \t\t\t\t\tif( _c !== undefined &&\n   \t\t\t\t\t\t_c.hasOwnProperty('then') &&\n   \t\t\t\t\t\ttypeof _c.then === 'function') _c.then( r =>  __resolve_loadController() );\n   \t\t\t\t\telse __resolve_loadController();\n   \t\t\t\t}else __resolve_loadController();\n\t\t\t});\n\t\t});\n\t},\n\t/**\n\t * [controller description]\n\t * @type {Object}\n\t */\n\tcontrollers : {},\n\t/**\n\t * [description]\n\t * @param  {[type]} )\n\t * @return {[type]}   [description]\n\t */\n\n\n\twatch : function(el, key, callback, options){\n\t\treturn sightglass(el, key, callback, options);\n\t},\n\tbindings : {},\n\tbind : function(el, data){\n\t\tvar view = rivets.bind(el,data);\n\t\tvar id = pg.guid();\n\t\tObject.defineProperty(view, '__pg_id__', {  value: id, enumerable: false, writable:false,  configurable: false });\n\t\tpg.bindings[id] = view;\n\t\treturn id;\n\t},\n\tunbind: function(id){\n\t\tif( pg.bindings.hasOwnProperty(id) ){\n\t\t\tpg.bindings[id].unbind();\n\t\t\tdelete pg.bindings[id];\n\t\t\treturn true;\n\t\t}else{\n\t\t\tconsole.warn('pg.unbind() : Provided binding ID does not match to any previous registered binding.');\n\t\t\treturn false;\n\t\t}\n\t},\n\tunbindAll: function(){\n\t\tpg.log('pg.unbindAll(): Unbinding all bindings ( pg.bind and rv:model:import)...');\n\t\t// automatic bindings in model imports....\n\t\tfor(var model in rivets.importedModels){\n\t\t\tif(!rivets.importedModels.hasOwnProperty(model) ) continue;\n\t\t\tconsole.log(model);\n\t\t\tfor(var view in rivets.importedModels[model].__views__){\n\t\t\t\tif(!rivets.importedModels[model].__views__.hasOwnProperty(view) ) continue;\n\t\t\t\trivets.importedModels[model].__views__[view].unbind();\n\t\t\t\tdelete rivets.importedModels[model].__views__[view];\n\t\t\t}\n\t\t}\n\t\t// manual bindings in in pomegradade...\n\t\tfor(var binding in pg.bindings){\n\t\t\tif(!pg.bindings.hasOwnProperty(binding) ) continue;\n\t\t\tconsole.log(binding);\n\t\t\tpg.unbind(binding);\n\t\t}\n\t\treturn true;\n\t},\n\tchromeExt: {\n\t\tpopupBinding : undefined,\n\t\tpopupObserver: chrome.runtime.onConnect.addListener(function(port){\n\t\t\t// popup OPEN\n\t\t\tpg.log('pg.chromeExt.popupObserver(): Popup opened!...');\n\t\t\tlet document  = chrome.extension.getViews({ type: 'popup' })[0].document;\n\t\t\tpg.chromeExt.popupBinding = pg.bind( document.querySelector('html'), {} );\n\n\t\t\t// popup CLOSE listener\n\t\t\tlet disconect = port.onDisconnect.addListener(function(){\n\t\t\t\tpg.unbindAll();\n\t\t\t\tpg.log('pg.chromeExt.popupObserver(): Popup closed!...');\n\t\t\t\tpg.chromeExt.popupBinding = null;\n\t\t\t\tdisconect = null;\n\t\t\t});\n\t\t}),\n\t},\n\t/**\n\t * [require description]\n\t * @param  {[type]} url [description]\n\t * @return {[type]}     [description]\n\t */\n\trequire: (function(){\n\t\tconst config = {\n\t\t\tbaseUrl : 'scripts/'\n\t\t};\n\t\tlet _require = function(src) {\n\t    \treturn new Promise(function(_resolve, _reject){\n\t\t\t   \tlet filename = src.substring(src.lastIndexOf('/')+1);\n\t\t\t\t// if no extension, assume .JS and extract again the filenamename\n\t\t\t\tif(filename.lastIndexOf('.js') === -1){\n\t\t\t\t\tsrc = src + '.js';\n\t\t\t\t\tfilename = src.substring(src.lastIndexOf('/')+1);\n\t\t\t\t}\n\t\t\t    // Adding the script tag to the head\n\t\t\t    let done = false;\n\t\t\t    let head = document.getElementsByTagName('head')[0];\n\t\t\t    let script = document.createElement('script');\n\t\t\t    script.type = 'text/javascript';\n\t\t\t    script.src = config.baseUrl + src;\n\t\t\t    //pg.log(script.src);\n\t\t\t\tscript.onload = script.onreadystatechange = function() {\n\t\t\t\t\t// attach to both events for cross browser finish detection:\n\t\t\t\t\tif ( !done && (!this.readyState || this.readyState === 'loaded' || this.readyState === 'complete') ) {\n\t\t\t\t\t\t// done! execute PROMISE _resolve\n\t\t\t\t\t\tdone = true;\n\t\t\t\t\t\t// cleans up a little memory, removing listener;\n\t\t\t\t\t\tscript.onload = script.onreadystatechange = null;\n\t\t\t\t\t\t_resolve();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t    // Fire the loading\n\t\t\t    head.appendChild(script);\n\t\t\t});\n\t\t};\n\t\t_require.config = function(custom_config){\n\t\t\tObject.assign(config,custom_config);\n\t\t\treturn true;\n\t\t};\n\t\treturn _require;\n\t})(),\n\t/**\n\t * [feeds description]\n\t * @type {Array}\n\t */\n\n\tlogStore : [],\n\tlog : function(msg = '{empty}' , method = 'log'){\n\t\tpg.logStore.push(msg);\n\t\tconsole[method](msg);\n\t\treturn true;\n\t},\n\t/**\n\t * [description]\n\t * @param  {[type]} ){ return\n\t * @return {[type]}     [description]\n\t */\n\n\n\tgetManifest : function(){ return chrome.app.getDetails(); },\n\tgetVersion : function(){ return chrome.app.getDetails().version; },\n\tgetCurrentLocale : function(){ return chrome.app.getDetails().current_locale; },\n\n\t/**\n\t * [createGuid description]\n\t * @return {[type]} [description]\n\t */\n\tcreateGuid : function(){ alert('use pg.gui!')},\n\n\tguid : function(){\n\t\tfunction S4() {  return (((1+Math.random())*0x10000)|0).toString(16).substring(1) }\n\t\t\t// then to call it, plus stitch in '4' in the third group\n\t\treturn (S4() + S4() + '-' + S4() + '-4' + S4().substr(0,3) + '-' + S4() + '-' + S4() + S4() + S4()).toLowerCase();\n\t}\n};\n\nif(document.readyState === 'complete' || document.readyState === 'interactive') pg.initialize();\nelse document.addEventListener('DOMContentLoaded', pg.initialize );\n"]}