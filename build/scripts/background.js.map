{"version":3,"sources":["background.es6"],"names":["script","document","createElement","type","src","onload","onreadystatechange","readyState","pg","ready","initialize","getElementsByTagName","appendChild","log","chrome","app","getDetails","version","popup","binding","runtime","onConnect","addListener","extension","getViews","bind","querySelector","disconect","port","onDisconnect","unbindAll","Promise","load","controller","then"],"mappings":";;AAAA;AACA;AACA;;AAEA,CAAC,YAAU;AACP,QAAIA,SAASC,SAASC,aAAT,CAAuB,QAAvB,CAAb;AACAF,WAAOG,IAAP,GAAc,iBAAd;AACAH,WAAOI,GAAP,GAAa,yBAAb;AACHJ,WAAOK,MAAP,GAAgBL,OAAOM,kBAAP,GAA4B,YAAW;AACtD,YAAK,CAAC,KAAKC,UAAN,IAAoB,KAAKA,UAAL,KAAoB,QAAxC,IAAoD,KAAKA,UAAL,KAAoB,UAA7E,EAA0FC,GAAGC,KAAH,CAAUC,UAAV;AAC1F,KAFD;AAGGT,aAASU,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyCC,WAAzC,CAAqDZ,MAArD;;AAGA,aAASU,UAAT,GAAqB;AACjBF,WAAGK,GAAH,CAAO,qCAAqCC,OAAOC,GAAP,CAAWC,UAAX,GAAwBC,OAApE;AACA;AACA,YAAIC,QAAQ;AACRC,qBAAU,IADF;AAERlB,sBAAU;AAFF,SAAZ;AAIAa,eAAOM,OAAP,CAAeC,SAAf,CAAyBC,WAAzB,CAAqC,gBAAQ;AACzC;AACA;AACA;AACAd,eAAGK,GAAH,CAAO,gDAAP;AACAK,kBAAMjB,QAAN,GAAiBa,OAAOS,SAAP,CAAiBC,QAAjB,CAA0B,EAAErB,MAAM,OAAR,EAA1B,EAA6C,CAA7C,EAAgDF,QAAjE;AACAiB,kBAAMC,OAAN,GAAgBX,GAAGiB,IAAH,CAASP,MAAMjB,QAAN,CAAeyB,aAAf,CAA6B,MAA7B,CAAT,EAA+C,EAA/C,CAAhB;AACA;AACA;AACA;AACA,gBAAIC,YAAYC,KAAKC,YAAL,CAAkBP,WAAlB,CAA+B,aAAI;AAC/Cd,mBAAGK,GAAH,CAAO,gDAAP;AACAL,mBAAGsB,SAAH;AACAZ,sBAAMC,OAAN,GAAgB,IAAhB;AACAD,sBAAMjB,QAAN,GAAiB,IAAjB;AACA0B,4BAAY,IAAZ;AACH,aANe,CAAhB;AAOH,SAjBD;AAkBA;AACA,eAAO,IAAII,OAAJ,CAAa,oBAAY;AAC5BvB,eAAGwB,IAAH,CAAQC,UAAR,CAAmB,KAAnB,EACCC,IADD,CACO;AAAA,uBAAI1B,GAAGK,GAAH,CAAO,wEAAP,CAAJ;AAAA,aADP;AAEH,SAHM,CAAP;AAIH;AACJ,CAzCD","file":"background.js","sourcesContent":["/* jsHint inline configuration : */\n/* jshint undef: true, unused: false */\n/* global chrome , System , rivets , sightglass, pg */\n\n(function(){\n    let script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = '/scripts/pomegranade.js';\n\tscript.onload = script.onreadystatechange = function() {\n\t\tif ( !this.readyState || this.readyState === 'loaded' || this.readyState === 'complete' ) pg.ready( initialize );\n\t};\n    document.getElementsByTagName('head')[0].appendChild(script);\n\n\n    function initialize(){\n        pg.log('*** Starting Torrent Observer v.' + chrome.app.getDetails().version );\n        // LISTENERS FOR POPUP OPEN/CLOSE\n        let popup = {\n            binding : null,\n            document: null\n        };\n        chrome.runtime.onConnect.addListener(port => {\n            //\n            //\n            // popup OPEN\n            pg.log('pg.chromeExt.popupObserver(): Popup opened!...');\n            popup.document = chrome.extension.getViews({ type: 'popup' })[0].document;\n            popup.binding = pg.bind( popup.document.querySelector('html'), {} );\n            //\n            //\n            // popup CLOSE listener\n            let disconect = port.onDisconnect.addListener( x=> {\n                pg.log('pg.chromeExt.popupObserver(): Popup closed!...');\n                pg.unbindAll();\n                popup.binding = null;\n                popup.document = null;\n                disconect = null;\n            });\n        });\n        // LAUNCH APPLICATION MAIN CONTROLLER, for initialization\n        return new Promise( _resolve => {\n            pg.load.controller('app')\n            .then( r=> pg.log('----------------------------------------------------------------------') );\n        });\n    }\n})();\n"]}