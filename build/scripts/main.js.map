{"version":3,"sources":["../../src/scripts/main.es6"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["var app,\n\tchrome;\n\n(function(){\n\t'use strict';\n\n\tapp = {\n\t\t/**\n\t\t * [feeds description]\n\t\t * @type {Array}\n\t\t */\n\t\tcategories : [\n\t\t\t{\n\t\t\t\tid \t\t: 'f11d24b3-be2f-4bdd-d0e0-2ebf9ba0f5c7',\n\t\t\t\tname \t: 'movies',\n\t\t\t\tfeeds \t: 0\n\t\t\t},{\n\t\t\t\tid \t\t: 'dd63224e-b59c-4b41-5f99-c63cffbbafe4',\n\t\t\t\tname \t: 'music',\n\t\t\t\tfeeds \t: 0\n\t\t\t},{\n\t\t\t\tid \t\t: '44748d67-be92-47a9-a5b6-de502f1e8cb5',\n\t\t\t\tname \t: 'software',\n\t\t\t\tfeeds \t: 0\n\t\t\t},{\n\t\t\t\tid \t\t: '91aa33c5-5099-48e8-b6a4-4a5946c0b617',\n\t\t\t\tname \t: 'others',\n\t\t\t\tfeeds \t: 0\n\t\t\t}\n\t\t],\n\t\tfeeds : [\n\t\t\t{\n\t\t\t\tid \t\t\t: 0,\n\t\t\t\tname \t\t: 'Kat Movies',\n\t\t\t\turl \t\t: 'https://kat.cr/movies/?rss=1',\n\t\t\t\tproperty\t: 'title',\n\t\t\t\tTTL \t\t: 10,\n\t\t\t\tcategories \t: ['f11d24b3-be2f-4bdd-d0e0-2ebf9ba0f5c7'],\n\t\t\t\titems \t\t: {}\n\t\t\t},{\n\t\t\t\tid \t\t\t: 1,\n\t\t\t\tname \t\t: 'Mininova Movies',\n\t\t\t\turl \t\t: 'http://www.mininova.org/rss.xml?cat=4',\n\t\t\t\tproperty\t: 'title',\n\t\t\t\tTTL \t\t: 10,\n\t\t\t\tcategories \t: ['f11d24b3-be2f-4bdd-d0e0-2ebf9ba0f5c7'],\n\t\t\t\titems \t\t: {}\n\t\t\t},{\n\t\t\t\tid \t\t\t: 2,\n\t\t\t\tname \t\t: 'YIFY Movies',\n\t\t\t\turl \t\t: 'https://yts.ag/rss',\n\t\t\t\tproperty\t: 'title',\n\t\t\t\tTTL \t\t: 10,\n\t\t\t\tcategories \t: ['f11d24b3-be2f-4bdd-d0e0-2ebf9ba0f5c7'],\n\t\t\t\titems \t\t: {}\n\t\t\t}\n\t\t],\n\t\tlogStore : [],\n\t\tlog : function(msg = '{empty}' , method = 'log'){\n\t\t\tapp.logStore.push(msg);\n\t\t\tconsole[method](msg);\n\t\t\treturn true;\n\t\t},\n\t\t/**\n\t\t * [description]\n\t\t * @param  {[type]} ){ return\n\t\t * @return {[type]}     [description]\n\t\t */\n\t\tgetManifest : function(){ return chrome.app.getDetails(); },\n\t\tgetVersion : function(){ return chrome.app.getDetails().version; },\n\t\tgetCurrentLocale : function(){ return chrome.app.getDetails().current_locale; },\n\t\t/**\n\t\t * [description]\n\t\t * @param  {[type]} )\n\t\t * @return {[type]}   [description]\n\t\t */\n\t\t_init : document.addEventListener('DOMContentLoaded', function() {\n  \t\t\tapp.getManifest();\n  \t\t\tapp.log('Starting Torrent Observer v.' + app.getVersion() );\n\n  \t\t\t// set html file for toolbar icon popup\n  \t\t\tchrome.browserAction.setPopup( {popup:'views/popup/popup.html'} );\n\t\t\tchrome.browserAction.onClicked.addListener(function(){\n\t\t\t\tapp.popup = chrome.extension.getViews()[1].document;\n\t\t\t\tapp.log('Popup opened');\n\t\t\t});\n\n  \t\t\tapp.countFeedsinAllCategories();\n\t\t\tapp.getAllFeeds().then(function(){ app.log('Init done'); });\n\n\t\t\tdelete app._init;\n\t\t}),\n\t\t/**\n\t\t * [popup description]\n\t\t * @type {[type]}\n\t\t */\n\t\tpopup : null,\n\t\t/**\n\t\t * [getCategoryById description]\n\t\t * @param  {[type]} id [description]\n\t\t * @return {[type]}    [description]\n\t\t */\n\t\tgetCategoryById : function(id){\n\t\t\tlet i = app.categories.findIndex( cat=>(cat.id === id ) ? true : false );\n\t\t\treturn (i === -1) ? -1 : app.categories[i];\n\t\t},\n\t\tgetCategoryByName : function(id){\n\t\t\tlet i = app.categories.findIndex( cat=>(cat.name === id ) ? true : false );\n\t\t\treturn (i === -1) ? -1 : app.categories[i];\n\t\t},\n\t\tcountFeedsinCategory: function(id){\n\t\t\tlet category = app.getCategoryById(id);\n\t\t\tif(category === -1) return -1;\n\n\t\t\tcategory.feeds = 0;\n\t\t\tfor (let i=0; i < app.feeds.length; i++ ) if(app.feeds[i].categories.indexOf(id) !== -1) category.feeds++;\n\t\t\treturn category.feeds;\n\t\t},\n\t\tcountFeedsinAllCategories: function(){\n\t\t\tfor (let i=0; i < app.categories.length; i++ ) app.countFeedsinCategory( app.categories[i].id );\n\t\t\treturn true;\n\t\t},\n\n\t\t/**\n\t\t * [updateAllFeeds description]\n\t\t * @return {[type]} [description]\n\t\t */\n\t\tgetAllFeeds : function(){\n\t\t\treturn new Promise(function(resolve, reject){\n\t\t\t\tapp.log('app.updateAllFeeds(): Updating all Feeds...');\n\t\t\t\tvar currentFeed = -1;\n\t\t\t\t// Loop through the Feeds with array.reduce...\n\t\t\t\tapp.feeds.reduce(function(sequence) {\n\t\t\t\t\treturn sequence.then(function() {\n\t\t\t\t\t\tcurrentFeed++;\n\t\t\t\t \t\treturn app.getFeed(currentFeed);\n\t\t\t\t\t}).then(function(result) {\n\t\t\t\t\t\tif(result) app.log('app.updateAllFeeds(): Feed #'+ ( currentFeed + 1) +' ' + app.feeds[currentFeed].name + ' UPDATED (' + result + ')' );\n\t\t\t\t    \telse  app.log('app.updateAllFeeds(): Feed #'+ ( currentFeed + 1) +' ' + app.feeds[currentFeed].name + ' FAILED (' + result + ')' );\n\t\t\t\t  \t});\n\t\t\t\t} , Promise.resolve());\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * [updateFeed description]\n\t\t * @param  {[type]} i [description]\n\t\t * @return {[type]}   [description]\n\t\t */\n\t\tgetFeed: function(i){\n\t\t\treturn new Promise( function(resolve, reject){\n\t\t\t\tif(i === undefined || i === null || i === '') return reject(-1);\n\n\t\t\t\t// get feed (allow feed array index or string url feed)\n\t\t\t\tlet feed;\n\t\t\t\tif( isNaN(i) && typeof i === 'string' ) feed= { url : i , name : '***'};\n\t\t\t\telse feed = app.feeds[i];\n\n\t\t\t\t// block if requested feed does not exist\n\t\t\t\tif(feed === undefined) return reject(-1);\n\n\t\t\t\tapp.log('app.updateFeed() : Updating Feed from :'+ feed.url +' ( ' + feed.name + ' )' );\n\n\t\t\t\t//\n\t\t\t\t// Prepare Ajax request\n\t\t\t\t//\n\t\t\t\tlet request = new XMLHttpRequest();\n\t\t\t\trequest.open('get', feed.url, true);\n\n\t\t\t\t// RESPONSE OK\n\t\t\t\trequest.onload  = function(_http){\n\t\t\t\t\tlet parser = new DOMParser();\n\t\t\t\t   \tlet xmlDoc = parser.parseFromString(request.responseText,'text/xml');\n\t\t\t\t\tapp.log(xmlDoc);\n\t\t\t\t\t//let xotree = new XML.ObjTree();\n\t\t\t\t\t//request = null;\n\t\t\t\t\treturn resolve(true);\n\t\t\t\t};\n\t\t\t\t// RESPONSE FAIL\n\t\t\t\trequest.onerror  = function(_http){\n\t\t\t\t\tapp.log('Error', request.statusText);\n\t\t\t\t\trequest = null;\n\t\t\t\t\treturn resolve(false);\n\t\t\t\t};\n\t\t\t\t// Send Request\n\t\t\t\trequest.send(null);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * [createGuid description]\n\t\t * @return {[type]} [description]\n\t\t */\n\t\tcreateGuid : function(){\n\t\t\tfunction S4() {  return (((1+Math.random())*0x10000)|0).toString(16).substring(1) }\n \t\t\t// then to call it, plus stitch in '4' in the third group\n\t\t\treturn (S4() + S4() + '-' + S4() + '-4' + S4().substr(0,3) + '-' + S4() + '-' + S4() + S4() + S4()).toLowerCase();\n\t\t}\n\t};\n\n})();\n\n\n"]}