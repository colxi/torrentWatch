{"version":3,"sources":["main.es6"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["var pg,\n\tchrome;\n(function(){\n\t'use strict';\n\tpg = {\n\t\t/**\n\t\t * [configure description]\n\t\t * @param  {[type]} obj [description]\n\t\t * @return {[type]}     [description]\n\t\t */\n\t\tconfigure : function(obj){} ,\n\t\t/**\n\t\t * [loadController description]\n\t\t * @param  {[type]} controller [description]\n\t\t * @return {[type]}            [description]\n\t\t */\n\t\tloadController : function(controller){\n\t\t\tpg.log('loadController() : Loading controller module :' + controller);\n\t\t\tSystem.import('/controllers/'+ controller +\".js\").then(function(controller){\n   \t\t\t\tconsole.log(controller);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * [controller description]\n\t\t * @type {Object}\n\t\t */\n\t\tcontroller : {\n\n\t\t},\n\t\t/**\n\t\t * [description]\n\t\t * @param  {[type]} )\n\t\t * @return {[type]}   [description]\n\t\t */\n\t\t_init : document.addEventListener('DOMContentLoaded', function() {\n  \t\t\tpg.require('imports/babel-polyfill/polyfill.min.js').then(function(){\n  \t\t\t\tpg.require('imports/systemjs/system.js').then(function(){\n  \t\t\t\t\tSystem.config({ baseURL: '/scripts' });\n\t\t  \t\t\tpg.require('lib/JSON.parseXML').then(function(){\n\t\t\t  \t\t\tpg.log('Starting Torrent Observer v.' + pg.getVersion() );\n\n\t\t\t  \t\t\t// set html file for toolbar icon popup\n\t\t\t  \t\t\tchrome.browserAction.setPopup( {popup:'views/popup/popup.html'} );\n\t\t\t\t\t\tchrome.browserAction.onClicked.addListener(function(){\n\t\t\t\t\t\t\tpg.popup = chrome.extension.getViews()[1].document;\n\t\t\t\t\t\t\tpg.log('Popup opened');\n\t\t\t\t\t\t});\n\n\t\t\t  \t\t\tpg.countFeedsinAllCategories();\n\t\t\t\t\t\tpg.getAllFeeds().then(function(){ pg.log('Init done'); });\n\n\t\t\t\t\t\tdelete pg._init;\n\t\t  \t\t\t});\n  \t\t\t\t});\n  \t\t\t});\n\t\t}),\n\t\t/**\n\t\t * [require description]\n\t\t * @param  {[type]} url [description]\n\t\t * @return {[type]}     [description]\n\t\t */\n\t\trequire: (function(){\n\t\t\tconst config = {\n\t\t\t\tbaseUrl : 'scripts/'\n\t\t\t};\n\t\t\tlet _require = function(src) {\n\t\t    \treturn new Promise(function(resolve, reject){\n\t\t\t\t   \tlet filename = src.substring(src.lastIndexOf('/')+1);\n\t\t\t\t\t// if no extension, assume .JS and extract again the filenamename\n\t\t\t\t\tif(filename.lastIndexOf('.js') === -1){\n\t\t\t\t\t\tsrc = src + '.js';\n\t\t\t\t\t\tfilename = src.substring(src.lastIndexOf('/')+1);\n\t\t\t\t\t}\n\t\t\t\t    // Adding the script tag to the head\n\t\t\t\t    let done = false;\n\t\t\t\t    let head = document.getElementsByTagName('head')[0];\n\t\t\t\t    let script = document.createElement('script');\n\t\t\t\t    script.type = 'text/javascript';\n\t\t\t\t    script.src = config.baseUrl + src;\n\t\t\t\t    pg.log(script.src);\n\t\t\t\t\tscript.onload = script.onreadystatechange = function() {\n\t\t\t\t\t\t// attach to both events for cross browser finish detection:\n\t\t\t\t\t\tif ( !done && (!this.readyState || this.readyState === 'loaded' || this.readyState === 'complete') ) {\n\t\t\t\t\t\t\t// done! execute PROMISE RESOLVE\n\t\t\t\t\t\t\tdone = true;\n\t\t\t\t\t\t\t// cleans up a little memory, removing listener;\n\t\t\t\t\t\t\tscript.onload = script.onreadystatechange = null;\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t    // Fire the loading\n\t\t\t\t    head.appendChild(script);\n\t\t\t\t});\n\t\t\t};\n\t\t\t_require.config = function(custom_config){\n\t\t\t\tObject.assign(config,custom_config);\n\t\t\t\treturn true;\n\t\t\t};\n\t\t\treturn _require;\n\t\t})(),\n\t\t/**\n\t\t * [feeds description]\n\t\t * @type {Array}\n\t\t */\n\t\tcategories : [\n\t\t\t{\n\t\t\t\tid \t\t: 'f11d24b3-be2f-4bdd-d0e0-2ebf9ba0f5c7',\n\t\t\t\tname \t: 'movies',\n\t\t\t\tfeeds \t: 0\n\t\t\t},{\n\t\t\t\tid \t\t: 'dd63224e-b59c-4b41-5f99-c63cffbbafe4',\n\t\t\t\tname \t: 'music',\n\t\t\t\tfeeds \t: 0\n\t\t\t},{\n\t\t\t\tid \t\t: '44748d67-be92-47a9-a5b6-de502f1e8cb5',\n\t\t\t\tname \t: 'software',\n\t\t\t\tfeeds \t: 0\n\t\t\t},{\n\t\t\t\tid \t\t: '91aa33c5-5099-48e8-b6a4-4a5946c0b617',\n\t\t\t\tname \t: 'others',\n\t\t\t\tfeeds \t: 0\n\t\t\t}\n\t\t],\n\t\tfeeds : [\n\t\t\t{\n\t\t\t\tid \t\t\t: 'eeed24d2-be2f-42bc-dc3a-3ebf9ba4eff3',\n\t\t\t\tname \t\t: 'Kat (All)',\n\t\t\t\turl \t\t: 'https://kat.cr/?rss=1',\n\t\t\t\tproperies\t: ['title'],\n\t\t\t\tTTL \t\t: 10,\n\t\t\t\tcategories \t: ['f11d24b3-be2f-4bdd-d0e0-2ebf9ba0f5c7','dd63224e-b59c-4b41-5f99-c63cffbbafe4','44748d67-be92-47a9-a5b6-de502f1e8cb5'],\n\t\t\t\tlastUpdate \t: null\n\t\t\t},{\n\t\t\t\tid \t\t\t: 'd44d24b3-af2f-12bd-abaa-2ebf9ba0f5c3',\n\t\t\t\tname \t\t: 'Kat Movies',\n\t\t\t\turl \t\t: 'https://kat.cr/movies/?rss=1',\n\t\t\t\tproperies\t: ['title'],\n\t\t\t\tTTL \t\t: 10,\n\t\t\t\tcategories \t: ['f11d24b3-be2f-4bdd-d0e0-2ebf9ba0f5c7'],\n\t\t\t\tlastUpdate \t: null\n\t\t\t},{\n\t\t\t\tid \t\t\t: 'a34d24b3-cc2f-6add-b2f0-5ebe9ac0f521',\n\t\t\t\tname \t\t: 'Mininova Movies',\n\t\t\t\turl \t\t: 'http://www.mininova.org/rss.xml?cat=4',\n\t\t\t\tproperies\t: ['title'],\n\t\t\t\tTTL \t\t: 10,\n\t\t\t\tcategories \t: ['f11d24b3-be2f-4bdd-d0e0-2ebf9ba0f5c7'],\n\t\t\t\tlastUpdate \t: null\n\t\t\t},{\n\t\t\t\tid \t\t\t: 'bdv424b6-cb1c-3aab-11b3-ac429bb0f530',\n\t\t\t\tname \t\t: 'YIFY Movies',\n\t\t\t\turl \t\t: 'https://yts.ag/rss',\n\t\t\t\tproperies\t: ['title'],\n\t\t\t\tTTL \t\t: 10,\n\t\t\t\tcategories \t: ['f11d24b3-be2f-4bdd-d0e0-2ebf9ba0f5c7'],\n\t\t\t\tlastUpdate \t: null\n\t\t\t}\n\t\t],\n\t\tlogStore : [],\n\t\tlog : function(msg = '{empty}' , method = 'log'){\n\t\t\tpg.logStore.push(msg);\n\t\t\tconsole[method](msg);\n\t\t\treturn true;\n\t\t},\n\t\t/**\n\t\t * [description]\n\t\t * @param  {[type]} ){ return\n\t\t * @return {[type]}     [description]\n\t\t */\n\t\tgetManifest : function(){ return chrome.app.getDetails(); },\n\t\tgetVersion : function(){ return chrome.app.getDetails().version; },\n\t\tgetCurrentLocale : function(){ return chrome.app.getDetails().current_locale; },\n\t\t/**\n\t\t * [popup description]\n\t\t * @type {[type]}\n\t\t */\n\t\tpopup : null,\n\t\t/**\n\t\t * [getCategoryById description]\n\t\t * @param  {[type]} id [description]\n\t\t * @return {[type]}    [description]\n\t\t */\n\t\tgetCategoryById : function(id){\n\t\t\tlet i = pg.categories.findIndex( cat=>(cat.id === id ) ? true : false );\n\t\t\treturn (i === -1) ? -1 : pg.categories[i];\n\t\t},\n\t\tgetCategoryByName : function(id){\n\t\t\tlet i = pg.categories.findIndex( cat=>(cat.name === id ) ? true : false );\n\t\t\treturn (i === -1) ? -1 : pg.categories[i];\n\t\t},\n\t\tcountFeedsinCategory: function(id){\n\t\t\tlet category = pg.getCategoryById(id);\n\t\t\tif(category === -1) return -1;\n\n\t\t\tcategory.feeds = 0;\n\t\t\tfor (let i=0; i < pg.feeds.length; i++ ) if(pg.feeds[i].categories.indexOf(id) !== -1) category.feeds++;\n\t\t\treturn category.feeds;\n\t\t},\n\t\tcountFeedsinAllCategories: function(){\n\t\t\tfor (let i=0; i < pg.categories.length; i++ ) pg.countFeedsinCategory( pg.categories[i].id );\n\t\t\treturn true;\n\t\t},\n\n\t\t/**\n\t\t * [updateAllFeeds description]\n\t\t * @return {[type]} [description]\n\t\t */\n\t\tgetAllFeeds : function(){\n\t\t\treturn new Promise(function(resolve, reject){\n\t\t\t\tpg.log('pg.updateAllFeeds(): Updating all Feeds...');\n\t\t\t\tvar currentFeed = -1;\n\t\t\t\t// Loop through the Feeds with array.reduce...\n\t\t\t\tpg.feeds.reduce(function(sequence) {\n\t\t\t\t\treturn sequence.then(function() {\n\t\t\t\t\t\tcurrentFeed++;\n\t\t\t\t \t\treturn pg.getFeed(currentFeed);\n\t\t\t\t\t}).then(function(result) {\n\t\t\t\t\t\tif(result) pg.log('pg.updateAllFeeds(): Feed #'+ ( currentFeed + 1) +' ' + pg.feeds[currentFeed].name + ' UPDATED (' + result + ')' );\n\t\t\t\t    \telse  pg.log('pg.updateAllFeeds(): Feed #'+ ( currentFeed + 1) +' ' + pg.feeds[currentFeed].name + ' FAILED (' + result + ')' );\n\t\t\t\t  \t});\n\t\t\t\t} , Promise.resolve());\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * [updateFeed description]\n\t\t * @param  {[type]} i [description]\n\t\t * @return {[type]}   [description]\n\t\t */\n\t\tgetFeed: function(i){\n\t\t\treturn new Promise( function(resolve, reject){\n\t\t\t\tif(i === undefined || i === null || i === '') return reject(-1);\n\n\t\t\t\t// get feed (allow feed array index or string url feed)\n\t\t\t\tlet feed;\n\t\t\t\tif( isNaN(i) && typeof i === 'string' ) feed= { url : i , name : '***'};\n\t\t\t\telse feed = pg.feeds[i];\n\n\t\t\t\t// block if requested feed does not exist\n\t\t\t\tif(feed === undefined) return reject(-1);\n\n\t\t\t\tpg.log('pg.updateFeed() : Updating Feed from :'+ feed.url +' ( ' + feed.name + ' )' );\n\n\t\t\t\t//\n\t\t\t\t// Prepare Ajax request\n\t\t\t\t//\n\t\t\t\tlet request = new XMLHttpRequest();\n\t\t\t\trequest.open('get', feed.url, true);\n\n\t\t\t\t// RESPONSE OK\n\t\t\t\trequest.onload  = function(){\n\t\t\t\t\tlet parser = new DOMParser();\n\t\t\t\t   \tlet xmlDoc = parser.parseFromString(request.responseText,'text/xml');\n\t\t\t\t\tlet JSONxml = JSON.parseXML(xmlDoc);\n\n\t\t\t\t\trequest = null;\n\t\t\t\t\treturn resolve(JSONxml);\n\t\t\t\t};\n\t\t\t\t// RESPONSE FAIL\n\t\t\t\trequest.onerror  = function(){\n\t\t\t\t\tpg.log('pg.getFeed(): Error on request.', request.statusText);\n\t\t\t\t\trequest = null;\n\t\t\t\t\treturn resolve(false);\n\t\t\t\t};\n\t\t\t\t// Send Request\n\t\t\t\trequest.send(null);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * [createGuid description]\n\t\t * @return {[type]} [description]\n\t\t */\n\t\tcreateGuid : function(){\n\t\t\tfunction S4() {  return (((1+Math.random())*0x10000)|0).toString(16).substring(1) }\n \t\t\t// then to call it, plus stitch in '4' in the third group\n\t\t\treturn (S4() + S4() + '-' + S4() + '-4' + S4().substr(0,3) + '-' + S4() + '-' + S4() + S4() + S4()).toLowerCase();\n\t\t}\n\t};\n\n})();\n\n\n"]}