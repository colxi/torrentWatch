{"version":3,"sources":["../../src/scripts/main.es6"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["(function(){\n\t'use strict';\n\n\tvar observers = {};\n\n\twindow.app = {\n\t\t/**\n\t\t * [feeds description]\n\t\t * @type {Array}\n\t\t */\n\t\tfeeds : [\n\t\t\t{\n\t\t\t\tid \t\t\t: 0,\n\t\t\t\tname \t\t: 'Kat Movies',\n\t\t\t\turl \t\t: 'https://kat.cr/movies/?rss=1',\n\t\t\t\tproperty\t: 'title',\n\t\t\t\tTTL \t\t: 10,\n\t\t\t\titems \t\t: {}\n\t\t\t},{\n\t\t\t\tid \t\t\t: 1,\n\t\t\t\tname \t\t: 'Mininova Movies',\n\t\t\t\turl \t\t: 'http://www.mininova.org/rss.xml?cat=4',\n\t\t\t\tproperty\t: 'title',\n\t\t\t\tTTL \t\t: 10,\n\t\t\t\titems \t\t: {}\n\t\t\t},{\n\t\t\t\tid \t\t\t: 2,\n\t\t\t\tname \t\t: 'YIFY Movies',\n\t\t\t\turl \t\t: 'https://yts.ag/rss',\n\t\t\t\tproperty\t: 'title',\n\t\t\t\tTTL \t\t: 10,\n\t\t\t\titems \t\t: {}\n\t\t\t}\n\t\t],\n\t\t/**\n\t\t * [description]\n\t\t * @param  {[type]} ){ return\n\t\t * @return {[type]}     [description]\n\t\t */\n\t\tgetManifest : function(){ return chrome.app.getDetails(); },\n\t\tgetVersion : function(){ return chrome.app.getDetails().version; },\n\t\tgetCurrentLocale : function(){ return chrome.app.getDetails().current_locale; },\n\t\t/**\n\t\t * [description]\n\t\t * @param  {[type]} )\n\t\t * @return {[type]}   [description]\n\t\t */\n\t\t_init : document.addEventListener('DOMContentLoaded', function() {\n  \t\t\tapp.getManifest();\n  \t\t\tdelete app._init;\n\n  \t\t\tconsole.log(\"Starting Torrent Observer v.\" + app.getVersion() );\n\n  \t\t\t// set html file for toolbar icon popup\n  \t\t\tchrome.browserAction.setPopup( {popup:'views/popup/popup.html'} );\n\t\t\tapp.popup = chrome.extension.getViews()[1].document;\n\t\t\tchrome.browserAction.onClicked.addListener(function(){\n\t\t\t\tconsole.log('Popup opened');\n\t\t\t});\n\n\t\t\tapp.updateAllFeeds().then(function(){ console.log('Init done'); });\n\t\t}),\n\t\t/**\n\t\t * [popup description]\n\t\t * @type {[type]}\n\t\t */\n\t\tpopup : null,\n\n\t\t/**\n\t\t * [updateAllFeeds description]\n\t\t * @return {[type]} [description]\n\t\t */\n\t\tupdateAllFeeds : function(){\n\t\t\treturn new Promise(function(resolve, reject){\n\t\t\t\tconsole.log('app.updateAllFeeds(): Updating all Feeds...');\n\t\t\t\tvar currentFeed = -1;\n\t\t\t\t// Loop through the Feeds with array.reduce...\n\t\t\t\tapp.feeds.reduce(function(sequence) {\n\t\t\t\t\treturn sequence.then(function() {\n\t\t\t\t\t\tcurrentFeed++;\n\t\t\t\t \t\treturn app.updateFeed(currentFeed);\n\t\t\t\t\t}).then(function(result) {\n\t\t\t\t\t\tif(result) console.log('app.updateAllFeeds(): Feed #'+ ( currentFeed + 1) +' ' + app.feeds[currentFeed].name + ' UPDATED (' + result + ')' );\n\t\t\t\t    \telse  console.log('app.updateAllFeeds(): Feed #'+ ( currentFeed + 1) +' ' + app.feeds[currentFeed].name + ' FAILED (' + result + ')' );\n\t\t\t\t  \t});\n\t\t\t\t} , Promise.resolve());\n\t\t\t});\n\t\t},\n\t\tupdateFeed: function(i){\n\t\t\treturn new Promise( function(resolve, reject){\n\t\t\t\t// block if requested feed does not exist\n\t\t\t\tif(i >= app.feeds.length) return reject(-1);\n\t\t\t\t// get feed\n\t\t\t\tvar feed = app.feeds[i];\n\t\t\t\tconsole.log('app.updateFeed() : Updating Feed (#'+ ( feed.id ) +' : ' + feed.name + ')');\n\t\t\t\t//\n\t\t\t\t// Prepare Ajax request\n\t\t\t\t//\n\t\t\t\tvar request = new XMLHttpRequest();\n\t\t\t\trequest.open(\"get\", feed.url, true);\n\t\t\t\t// RESPONSE OK\n\t\t\t\trequest.onload  = function(_http){\n\t\t\t\t\tvar parser = new DOMParser();\n\t\t\t\t   \tvar xmlDoc = parser.parseFromString(request.responseText,\"text/xml\");\n\t\t\t\t\tconsole.log(xmlDoc);\n\t\t\t\t\txotree = new XML.ObjTree();\n\t\t\t\t\trequest = null;\n\t\t\t\t\treturn resolve(true);\n\t\t\t\t};\n\t\t\t\t// RESPONSE FAIL\n\t\t\t\trequest.onerror  = function(_http){\n\t\t\t\t\tconsole.log(\"Error\", request.statusText);\n\t\t\t\t\trequest = null;\n\t\t\t\t\treturn resolve(false);\n\t\t\t\t};\n\t\t\t\t// Send Request\n\t\t\t\trequest.send(null);\n\t\t\t});\n\t\t}\n\t};\n\n\n})();\n\n\n"]}