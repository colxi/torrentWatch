{"version":3,"sources":["app.es6"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["/* jsHint inline configuration : */\r\n/* jshint undef: true, unused: false */\r\n/* global chrome , System , pg , rivets , sightglass */\r\n\r\n// let main extends pg.__Controller{\r\nlet app ={\r\n\t__constructor(){\r\n\t\treturn new Promise( (resolve,reject) =>{\r\n\t\t\tpg.log('*** Starting Torrent Observer v.' + pg.getVersion() );\r\n\r\n\t\t\t// load some required pg modules\r\n\t\t\tpg.load.module('JSON/parseXML' , 'FORM/validation').then( r => {\r\n\t\t\t\t// make form validation resources bindable\r\n\t\t\t\tthis.regExp = pg.FORM.validation.pattern;\r\n\t\t\t\tthis.regExpInfo = pg.FORM.validation.title;\r\n\t  \t\t\tthis.countFeedsinAllCategories();\r\n\t\t\t\tthis.getAllFeeds().then( resolve );\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t},\r\n\r\n\tlocation : 'categories',\r\n\r\n\tregExp : {},\r\n\r\n\tregExpInfo : {},\r\n\r\n\tData : {\r\n\t\twatchers : [\r\n\t\t\t{\r\n\t\t\t\tname: 'ghostbusters',\r\n\t\t\t\tcategories : ['f11d24b3-be2f-4bdd-d0e0-2ebf9ba0f5c7'],\r\n\t\t\t\tdirectives : [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tin : 'title',\r\n\t\t\t\t\t\thas : 'ghostbusters'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t}\r\n\t\t],\r\n\t\tcategories : [\r\n\t\t\t{\r\n\t\t\t\tid \t\t: 'f11d24b3-be2f-4bdd-d0e0-2ebf9ba0f5c7',\r\n\t\t\t\tname \t: 'movies',\r\n\t\t\t\tfeeds \t: 0\r\n\t\t\t},{\r\n\t\t\t\tid \t\t: 'dd63224e-b59c-4b41-5f99-c63cffbbafe4',\r\n\t\t\t\tname \t: 'music',\r\n\t\t\t\tfeeds \t: 0\r\n\t\t\t},{\r\n\t\t\t\tid \t\t: '44748d67-be92-47a9-a5b6-de502f1e8cb5',\r\n\t\t\t\tname \t: 'software',\r\n\t\t\t\tfeeds \t: 0\r\n\t\t\t},{\r\n\t\t\t\tid \t\t: '91aa33c5-5099-48e8-b6a4-4a5946c0b617',\r\n\t\t\t\tname \t: 'others',\r\n\t\t\t\tfeeds \t: 0\r\n\t\t\t}\r\n\t\t],\r\n\t\tfeeds : [\r\n\t\t\t{\r\n\t\t\t\tid \t\t\t\t\t: 'a34d24b3-cc2f-6add-b2f0-5ebe9ac0f521',\r\n\t\t\t\tname \t\t\t\t: 'Mininova Movies',\r\n\t\t\t\turl \t\t\t\t: 'http://www.mininova.org/rss.xml?cat=4',\r\n\t\t\t\tfields\t\t\t\t: {\r\n\t\t\t\t\tavailable \t\t\t: ['title'],\r\n\t\t\t\t\tassignations \t\t: {\r\n\t\t\t\t\t\ttitle \t\t\t\t: 'title',\r\n\t\t\t\t\t\tmagnet \t\t\t\t: undefined,\r\n\t\t\t\t\t\turl \t\t\t\t: undefined\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tpropertiesWatched \t: ['title'],\r\n\t\t\t\tTTL \t\t\t\t: 10,\r\n\t\t\t\tcategories \t\t\t: ['f11d24b3-be2f-4bdd-d0e0-2ebf9ba0f5c7', '44748d67-be92-47a9-a5b6-de502f1e8cb5', '44748d67-be92-47a9-a5b6-de502f1e8cb5'],\r\n\t\t\t\tstatus \t\t\t\t: {\r\n\t\t\t\t\tlastCheck \t\t\t: null,\r\n\t\t\t\t\tcode \t\t\t\t: 200,\r\n\t\t\t\t\tdetails \t\t\t: undefined\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//\r\n\t\t\t{\r\n\t\t\t\tid \t\t\t\t\t: 'bdv424b6-cb1c-3aab-11b3-ac429bb0f530',\r\n\t\t\t\tname \t\t\t\t: 'YIFY Movies',\r\n\t\t\t\turl \t\t\t\t: 'https://yts.ag/rss',\r\n\t\t\t\tfields\t\t\t\t: {\r\n\t\t\t\t\tavailable \t\t\t: ['title'],\r\n\t\t\t\t\tassignations \t\t: {\r\n\t\t\t\t\t\ttitle \t\t\t\t: 'title',\r\n\t\t\t\t\t\tmagnet \t\t\t\t: undefined,\r\n\t\t\t\t\t\turl \t\t\t\t: undefined\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tTTL \t\t\t\t: 10,\r\n\t\t\t\tcategories \t\t\t: ['f11d24b3-be2f-4bdd-d0e0-2ebf9ba0f5c7', '44748d67-be92-47a9-a5b6-de502f1e8cb5'],\r\n\t\t\t\tstatus \t\t\t\t: {\r\n\t\t\t\t\tlastCheck \t\t\t: null,\r\n\t\t\t\t\tcode \t\t\t\t: 200,\r\n\t\t\t\t\tdetails \t\t\t: undefined\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//\r\n\t\t\t{\r\n\t\t\t\tid \t\t\t\t\t: 'bdv424b6-cb1c-3aab-11b3-ac429bb0f531',\r\n\t\t\t\tname \t\t\t\t: 'Cucu Movies',\r\n\t\t\t\turl \t\t\t\t: 'https://yts.ag/rss',\r\n\t\t\t\tfields\t\t\t\t: {\r\n\t\t\t\t\tavailable \t\t\t: ['title'],\r\n\t\t\t\t\tassignations \t\t: {\r\n\t\t\t\t\t\ttitle \t\t\t\t: 'title',\r\n\t\t\t\t\t\tmagnet \t\t\t\t: undefined,\r\n\t\t\t\t\t\turl \t\t\t\t: undefined\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tTTL \t\t\t\t: 10,\r\n\t\t\t\tcategories \t\t\t: ['f11d24b3-be2f-4bdd-d0e0-2ebf9ba0f5c7'],\r\n\t\t\t\tstatus \t\t\t\t: {\r\n\t\t\t\t\tlastCheck \t\t\t: null,\r\n\t\t\t\t\tcode \t\t\t\t: 200,\r\n\t\t\t\t\tdetails \t\t\t: undefined\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//\r\n\t\t\t{\r\n\t\t\t\tid \t\t\t\t\t: 'bdv424b6-cb1c-3aab-11b3-ac429bb0f532',\r\n\t\t\t\tname \t\t\t\t: 'Crashy RSS',\r\n\t\t\t\turl \t\t\t\t: 'https://willfail.ag/rss',\r\n\t\t\t\tfields\t\t\t\t: {\r\n\t\t\t\t\tavailable \t\t\t: ['title'],\r\n\t\t\t\t\tassignations \t\t: {\r\n\t\t\t\t\t\ttitle \t\t\t\t: 'title',\r\n\t\t\t\t\t\tmagnet \t\t\t\t: undefined,\r\n\t\t\t\t\t\turl \t\t\t\t: undefined\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tTTL \t\t\t\t: 10,\r\n\t\t\t\tcategories \t\t\t: ['f11d24b3-be2f-4bdd-d0e0-2ebf9ba0f5c7'],\r\n\t\t\t\tstatus \t\t\t\t: {\r\n\t\t\t\t\tlastCheck \t\t\t: null,\r\n\t\t\t\t\tcode \t\t\t\t: 200,\r\n\t\t\t\t\tdetails \t\t\t: undefined\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\r\n\temptyWatcher(){\r\n\t\treturn {\r\n\t\t\tid \t\t\t: undefined,\r\n\t\t \tname \t\t: undefined,\r\n\t\t\tcategories \t: [],\r\n\t\t\tdirectives \t: [\r\n\t\t\t\t{\r\n\t\t\t\t\tin \t: 'title',\r\n\t\t\t\t\thas : undefined\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t};\r\n\t},\r\n\r\n\tsaveWatcher(w){\r\n\t\tconsole.log('app.saveWatcher(): saving watcher');\r\n\t\tlet i = app.getWatcherIndexById(w.id);\r\n\t\tif(i === -1) i = app.Data.watchers.length;\r\n\t\tapp.Data.watchers[i] = w;\r\n\t\treturn true;\r\n\t},\r\n\r\n\tgetWatcherIndexById(id){\r\n\t\treturn app.Data.watchers.findIndex( watcher=>(watcher.id === id ) ? true : false );\r\n\t},\r\n\r\n\temptyCategory(){\r\n\t\treturn {\r\n\t\t\tid \t\t: undefined,\r\n\t\t\tname \t: undefined,\r\n\t\t\tfeeds \t: 0\r\n\t\t};\r\n\t},\r\n\r\n\tsaveCategory(c){\r\n\t\tconsole.log('app.saveCategory(): saving category');\r\n\t\tlet i = app.getCategoryIndexById(c.id);\r\n\t\tif(i === -1) i = app.Data.categories.length;\r\n\t\tapp.Data.categories[i] = c;\r\n\t\tapp.countFeedsinAllCategories();\r\n\t\treturn true;\r\n\t},\r\n\r\n\tdeleteCategory(id){\r\n\t\tconsole.log('app.deleteCategory(): deleting category');\r\n\t\tlet i = app.getCategoryIndexById(id);\r\n\t\tif(i === -1) return false;\r\n\t\tapp.Data.categories.splice(i,1);\r\n\t\tapp.countFeedsinAllCategories();\r\n\t\treturn true;\r\n\t},\r\n\r\n\tgetCategoryById(id){\r\n\t\t\tlet i = app.Data.categories.findIndex( cat=>(cat.id === id ) ? true : false );\r\n\t\t\treturn (i === -1) ? -1 : app.Data.categories[i];\r\n\t},\r\n\r\n\tgetCategoryIndexById(id){\r\n\t\treturn app.Data.categories.findIndex( category=>(category.id === id ) ? true : false );\r\n\t},\r\n\r\n\tgetCategoryByName(id){\r\n\t\tlet i = app.Data.categories.findIndex( cat=>(cat.name === id ) ? true : false );\r\n\t\treturn (i === -1) ? -1 : app.Data.categories[i];\r\n\t},\r\n\r\n\tcountFeedsinCategory(id){\r\n\t\tlet category = app.getCategoryById(id);\r\n\t\tif(category === -1) return -1;\r\n\r\n\t\tcategory.feeds = 0;\r\n\t\tfor (let i=0; i < app.Data.feeds.length; i++ ) if(app.Data.feeds[i].categories.indexOf(id) !== -1) category.feeds++;\r\n\t\treturn category.feeds;\r\n\t},\r\n\r\n\tcountFeedsinAllCategories(){\r\n\t\tfor (let i=0; i < app.Data.categories.length; i++ ) app.countFeedsinCategory( app.Data.categories[i].id );\r\n\t\treturn true;\r\n\t},\r\n\r\n\tsaveFeed(f){\r\n\t\tconsole.log('app.saveFeed(): saving feed');\r\n\t\tlet i = app.getFeedIndexById(f.id);\r\n\t\tif(i === -1) i = app.Data.feeds.length;\r\n\t\tapp.Data.feeds[i] = f;\r\n\t\tapp.countFeedsinAllCategories();\r\n\t\treturn true;\r\n\t},\r\n\r\n\tdeleteFeed(id){\r\n\t\tconsole.log('app.deleteFeed(): deleting feed');\r\n\t\tlet i = app.getFeedIndexById(id);\r\n\t\tif(i === -1) return false;\r\n\t\tapp.Data.feeds.splice(i,1);\r\n\t\tapp.countFeedsinAllCategories();\r\n\t\treturn true;\r\n\t},\r\n\r\n\tgetFeedById(id, original = false){\r\n\t\tlet i = app.getFeedIndexById(id);\r\n\t\treturn (i === -1) ? -1 :  ( original  ? app.Data.feeds[i] : JSON.parse( JSON.stringify(app.Data.feeds[i]) ) );\r\n\t},\r\n\r\n\tgetFeedIndexById(id){\r\n\t\treturn app.Data.feeds.findIndex( feed=>(feed.id === id ) ? true : false );\r\n\t},\r\n\r\n\temptyFeed(){\r\n\t\treturn {\r\n\t\t\tid \t\t\t\t: undefined,\r\n\t\t\tname \t\t\t: undefined,\r\n\t\t\turl \t\t\t: undefined,\r\n\t\t\tfields\t \t\t: {\r\n\t\t\t\tavailable \t\t: [],\r\n\t\t\t\tassignations \t: {\r\n\t\t\t\t\ttitle \t\t\t: undefined,\r\n\t\t\t\t\tmagnet \t\t\t: undefined,\r\n\t\t\t\t\turl \t\t\t: undefined\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcategories \t\t: [],\r\n\t\t\tTTL \t\t\t: 120,\r\n\t\t\tstatus \t\t\t: {\r\n\t\t\t\tlastCheck \t\t: undefined,\r\n\t\t\t\tcode \t\t\t: undefined,\r\n\t\t\t\tdetails \t\t: undefined\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\r\n\tgetAllFeeds(){\r\n\t\treturn new Promise( (_resolve, _reject)=>{\r\n\t\t\tpg.log('pg.updateAllFeeds(): Updating all Feeds...');\r\n\t\t\tvar currentFeed = -1;\r\n\t\t\t// Loop through the Feeds with array.reduce...\r\n\t\t\tapp.Data.feeds.reduce( (sequence) => {\r\n\t\t\t\treturn sequence.then( ()=> {\r\n\t\t\t\t\tcurrentFeed++;\r\n\t\t\t \t\treturn app.getFeed(app.Data.feeds[currentFeed].id);\r\n\t\t\t\t}).then( (result)=> {\r\n\t\t\t\t\tif(result) pg.log('pg.updateAllFeeds(): Feed #'+ ( currentFeed + 1) +' ' + app.Data.feeds[currentFeed].name + ' UPDATED' );\r\n\t\t\t    \telse  pg.log('pg.updateAllFeeds(): Feed #'+ ( currentFeed + 1) +' ' + app.Data.feeds[currentFeed].name + ' FAILED' );\r\n\t\t\t  \t\tif( (currentFeed + 1)=== app.Data.feeds.length) _resolve();\r\n\t\t\t  \t});\r\n\t\t\t} , Promise.resolve());\r\n\t\t});\r\n\t},\r\n\r\n\tupdateFeed(id){ app.getFeed(id) },\r\n\r\n\tgetFeed(id){\r\n\t\treturn new Promise( (_resolve, _reject)=>{\r\n\t\t\tif(id === undefined || id === null || id === '') return _reject(-1);\r\n\r\n\t\t\t// get feed (allow feed Id index or string url feed)\r\n\t\t\tlet feed;\r\n\r\n\t\t\tfeed = app.getFeedById(id, true);\r\n\t\t\tif( feed === -1 ) feed = { url : id , name : '***', status : {}};\r\n\r\n\t\t\tfeed.status.code = 100;\r\n\t\t\tfeed.status.details = 'Updating...';\r\n\t\t\tfeed.status.lastCheck = new Date();\r\n\r\n\t\t\tpg.log('pg.updateFeed() : Updating Feed from :'+ feed.url +' ( ' + feed.name + ' )' );\r\n\r\n\t\t\t//\r\n\t\t\t// Prepare Ajax request\r\n\t\t\t//\r\n\t\t\tlet request = new XMLHttpRequest();\r\n\t\t\trequest.open('get', feed.url, true);\r\n\r\n\t\t\t// RESPONSE OK\r\n\t\t\trequest.onload  = ()=>{\r\n\t\t\t\tlet parser = new DOMParser();\r\n\t\t\t   \tlet xmlDoc = parser.parseFromString(request.responseText,'text/xml');\r\n\t\t\t\tlet JSONxml = pg.JSON.parseXML(xmlDoc, true);\r\n\r\n\t\t\t\tfeed.status.code = 200;\r\n\t\t\t\tfeed.status.details = 'Ok';\r\n\r\n\t\t\t\trequest = null;\r\n\t\t\t\treturn _resolve(JSONxml);\r\n\t\t\t};\r\n\t\t\t// RESPONSE FAIL\r\n\t\t\trequest.onerror  = ()=>{\r\n\t\t\t\tpg.log('pg.getFeed(): Error on request... ' + request.statusText);\r\n\t\t\t\tfeed.status.code =  400;\r\n\t\t\t\tfeed.status.details = 'Fail';\r\n\t\t\t\trequest = null;\r\n\t\t\t\treturn _resolve(false);\r\n\t\t\t};\r\n\t\t\t// Send Request\r\n\t\t\trequest.send(null);\r\n\t\t});\r\n\t},\r\n\r\n\tgetFeedItemsProperties : function(feed){\r\n\t\tlet prop = [];\r\n\t\tfor(let i in feed.rss.channel.item[0]){\r\n\t\t \tif( feed.rss.channel.item[0].hasOwnProperty(i) &&  i.charAt(0).match(/[A-Z|a-z]/i) ) prop.push(i);\r\n\t\t}\r\n\t\treturn prop;\r\n\t},\r\n\r\n\r\n\r\n\ttoogleArrayItem(item, array, event, object){\r\n\t\tlet i = array.indexOf(item);\r\n\t\tif(i === -1) array.push(item);\r\n\t\telse array.splice(i, 1);\r\n\t\tconsole.log(arguments);\r\n\t}\r\n};\r\n\r\nexport default app;\r\n"]}