{"version":3,"sources":["../../src/scripts/popup.es6"],"names":[],"mappings":"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","file":"popup.js","sourcesContent":["var chrome, rivets, view, app;\r\n\r\n(function(){\r\n\t'use strict';\r\n\r\n\tview = {};\r\n\tview._init = document.addEventListener('DOMContentLoaded', function() {\r\n\t\tconsole.log('Popup opened!');\r\n\t\tapp = chrome.extension.getBackgroundPage().app;\r\n\t\tview.categories = app.categories;\r\n\t\tview.feeds \t\t= app.feeds;\r\n\t\tview.logStore \t= app.logStore;\r\n\r\n\t\trivets.configure({\r\n\t\t\t// Attribute prefix in templates\r\n\t\t\tprefix: 'rv',\r\n\t\t\t// Preload templates with initial data on bind\r\n\t\t\tpreloadData: true,\r\n\t\t\t// Root sightglass interface for keypaths\r\n\t\t\trootInterface: '.',\r\n\t\t\t// Template delimiters for text bindings\r\n\t\t\ttemplateDelimiters: ['{', '}'],\r\n\t\t\t// Augment the event handler of the on-* binder\r\n\t\t\thandler: function(target, ev, binding) {\r\n\t\t\t\treturn this.call(target, event, binding.view.models,binding);\r\n\t\t\t}\r\n\t\t});\r\n\t\trivets.bind( document.querySelector('#app-wrapper') , { view : view } );\r\n\t});\r\n\r\n\tview.toogleArrayItem = function(item, array, event, object){\r\n\t\tlet i = array.indexOf(item);\r\n\t\tif(i === -1) array.push(item);\r\n\t\telse array.splice(i, 1);\r\n\t\tconsole.log(arguments);\r\n\t};\r\n\r\n\tview.currentTab  \t= 'tab-feeds';\r\n\tview.categories \t= null;\r\n\tview.feeds \t\t\t= null;\r\n\tview.logStore\t\t= null;\r\n\r\n\tview.category = {\r\n\t\tform : {\r\n\t\t\tname \t\t: '',\r\n\t\t\tvalidates \t: true,\r\n\t\t},\r\n\t\tadd : function(){\r\n\t\t\tview.category.form.name = view.category.form.name.trim().toLowerCase();\r\n\t\t\tview.category.form.validates  = true;\r\n\t\t\t// validate category name\r\n\t\t\tif( view.category.form.name.length === 0 || app.getCategoryByName(view.category.form.name) !== -1 ) view.category.form.validates  = false;\r\n\t\t\tif(!view.category.form.validates) return false;\r\n\r\n\t\t\t// create category\r\n\t\t\tview.categories.push({\r\n\t\t\t\tid: app.createGuid(),\r\n\t\t\t\tname: view.category.form.name,\r\n\t\t\t\tfeeds:0\r\n\t\t\t});\r\n\r\n\t\t\t// reset input\r\n\t\t\tview.category.form.name \t\t= '';\r\n\t\t\tview.category.form.validates = true;\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tremove: function(e,i){\r\n\t\t\tview.categories.splice(i.index, 1);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n\r\n\tview.feed = {\r\n \t\thelpers : {\r\n \t\t\tformNav : 'form-data',\r\n \t\t\tfeedProperties: [],\r\n \t\t\tmode : 'new'\r\n \t\t},\r\n\r\n\t\tform : {\r\n\t\t\tname: '',\r\n\t\t\turl : 'https://kat.cr/movies/?rss=1',\r\n\t\t\tcategories : [],\r\n\t\t\tTTL : 60,\r\n\t\t\tproperties :  [],\r\n\t\t},\r\n\r\n\t\tsave : function(){\r\n\t\t\tvar feed = {\r\n\t\t\t\tid \t\t\t: '',\r\n\t\t\t\tname \t\t: '',\r\n\t\t\t\turl \t\t: '',\r\n\t\t\t\tproperies\t: [],\r\n\t\t\t\tTTL \t\t: 0,\r\n\t\t\t\tcategories \t: [],\r\n\t\t\t};\r\n\r\n\t\t\tfeed.id = app.createGuid();\r\n\t\t\tfeed.name = view.feed.form.name.trim();\r\n\t\t\tfeed.url = view.feed.form.url.trim();\r\n\t\t\tfeed.categories = view.feed.form.categories;\r\n\t\t\tfeed.TTL = view.feed.form.TTL;\r\n\t\t\tfeed.properties = view.feed.form.properties;\r\n\r\n\t\t\tview.feeds.push(feed);\r\n\t\t\tapp.countFeedsinAllCategories();\r\n\t\t\treturn true;\r\n\t\t},\r\n\r\n\t\tshowFormFeedData : function(){ view.feed.helpers.formNav = 'form-data' },\r\n\r\n\t\tshowFormFeedConfig : function(){\r\n\t\t\tconsole.log('Validating RSS feed...');\r\n\r\n\t\t\tapp.getFeed(view.feed.form.url).then(function(result){\r\n\t\t\t\tconsole.log(result);\r\n\r\n\t\t\t\tview.feed.helpers.feedProperties = [];\r\n\t\t\t\tview.feed.form.properties = [];\r\n\t\t\t\tif(result === false){\r\n\t\t\t\t\talert('RSS invalid');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tview.feed.helpers.formNav= 'form-config';\r\n\t\t\t\tfor(let i in result.rss.channel.item[0]){\r\n\t\t\t\t \tif( result.rss.channel.item[0].hasOwnProperty(i) &&  i.charAt(0).match(/[A-Z|a-z]/i) ) view.feed.helpers.feedProperties.push(i);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n})();\r\n"]}